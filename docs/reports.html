<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Reports with R Markdown | Applied Data Skills</title>
<meta name="author" content="Emily Nordmann and Lisa DeBruine">
<meta name="description" content="2.1 Intended Learning Outcomes Be able to knit a simple reproducible report with R Markdown Be able to edit Markdown to show/hide code and use inline coding Be able to identify different types of...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="Chapter 2 Reports with R Markdown | Applied Data Skills">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/ads-v1/reports.html">
<meta property="og:image" content="https://psyteachr.github.io/ads-v1/images/logos/twitter_card.png">
<meta property="og:description" content="2.1 Intended Learning Outcomes Be able to knit a simple reproducible report with R Markdown Be able to edit Markdown to show/hide code and use inline coding Be able to identify different types of...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Reports with R Markdown | Applied Data Skills">
<meta name="twitter:description" content="2.1 Intended Learning Outcomes Be able to knit a simple reproducible report with R Markdown Be able to edit Markdown to show/hide code and use inline coding Be able to identify different types of...">
<meta name="twitter:image" content="https://psyteachr.github.io/ads-v1/images/logos/twitter_card.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.9.4/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Processing &amp; Presenting Data">Applied Data Skills</a>:
        <small class="text-muted">Processing &amp; Presenting Data</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Intro to R, RStudio and R Markdown</a></li>
<li><a class="active" href="reports.html"><span class="header-section-number">2</span> Reports with R Markdown</a></li>
<li><a class="" href="viz.html"><span class="header-section-number">3</span> Basic Data Visualisation</a></li>
<li><a class="" href="data.html"><span class="header-section-number">4</span> Data Import and Relations</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">5</span> Data Tidying</a></li>
<li><a class="" href="wrangle.html"><span class="header-section-number">6</span> Data Wrangling</a></li>
<li><a class="" href="summary.html"><span class="header-section-number">7</span> Data Summaries</a></li>
<li><a class="" href="custom.html"><span class="header-section-number">8</span> Customising Visualisations</a></li>
<li><a class="" href="present.html"><span class="header-section-number">9</span> Dashboards, Reports, and Presentations</a></li>
<li><a class="" href="next.html"><span class="header-section-number">10</span> What's Next</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">B</span> Symbols</a></li>
<li><a class="" href="conventions.html"><span class="header-section-number">C</span> Conventions</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/ads-v1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="reports" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Reports with R Markdown<a class="anchor" aria-label="anchor" href="#reports"><i class="fas fa-link"></i></a>
</h1>
<div id="ilo-reports" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Intended Learning Outcomes<a class="anchor" aria-label="anchor" href="#ilo-reports"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Be able to knit a simple reproducible report with R Markdown</li>
<li>Be able to edit Markdown to show/hide code and use inline coding</li>
<li>Be able to identify different types of data</li>
</ul>
</div>
<div id="resources-repro" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Resources<a class="anchor" aria-label="anchor" href="#resources-repro"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><a href="http://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">R Markdown Cheat Sheet</a></li>
<li><a href="https://haozhu233.github.io/kableExtra/awesome_table_in_html.html">kableExtra</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">R Markdown reference Guide</a></li>
<li><a href="https://rmarkdown.rstudio.com/lesson-1.html">R Markdown Tutorial</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a> by Yihui Xie, J. J. Allaire, &amp; Garrett Grolemund</li>
<li>
<a href="https://slides.djnavarro.net/project-structure/">Project Structure</a> by Danielle Navarro</li>
<li>
<a href="https://speakerdeck.com/jennybc/how-to-name-files">How to name files</a> by Jenny Bryan</li>
</ul>
</div>
<div id="setup-repro" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Setup<a class="anchor" aria-label="anchor" href="#setup-repro"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="projects" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Organising a project<a class="anchor" aria-label="anchor" href="#projects"><i class="fas fa-link"></i></a>
</h2>
<p>First, we need to get organised.</p>
<p><a class="glossary" target="_blank" title="A way to organise related files in RStudio" href="https://psyteachr.github.io/glossary/p#project">Projects</a> in RStudio are a way to group all of the files you need for one project. Most projects include scripts, data files, and output files like the PDF version of the script or images.</p>
<div class="try">
<p>Make a new <a class="glossary" target="_blank" title="A collection or “folder” of files on a computer." href="https://psyteachr.github.io/glossary/d#directory">directory</a> where you will keep all of your materials for this class.</p>
<p>Choose <strong><code>New Project...</code></strong> under the <strong><code>File</code></strong> menu to create a new project called <code class="path">02-reports</code> in this directory.</p>
</div>
<div id="working-directory" class="section level3" number="2.4.1">
<h3>
<span class="header-section-number">2.4.1</span> Working Directory<a class="anchor" aria-label="anchor" href="#working-directory"><i class="fas fa-link"></i></a>
</h3>
<p>Where should you put all of your files? You usually want to have all of your scripts and data files in one subtree of your computer's directory structure. Usually there is a single <a class="glossary" target="_blank" title="The filepath where R is currently reading and writing files." href="https://psyteachr.github.io/glossary/w#working-directory">working directory</a> where your data and scripts are stored.</p>
<p>Your script should only reference files in three locations, using the appropriate format.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Where</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>on the web</td>
<td>"<a href="https://psyteachr.github.io/ads-v1/data/widgets_gadgets.xlsx" class="uri">https://psyteachr.github.io/ads-v1/data/widgets_gadgets.xlsx</a>"</td>
</tr>
<tr class="even">
<td>in the working directory</td>
<td>"widgets_gadgets.xlsx"</td>
</tr>
<tr class="odd">
<td>in a subdirectory</td>
<td>"data/widgets_gadgets.xlsx"</td>
</tr>
</tbody>
</table></div>
<div class="warning">
<p>Never set or change your working directory in a script.</p>
</div>
<p>R Markdown files will automatically use the same directory the .Rmd file is in as the working directory.</p>
<p>If your script needs a file in a subdirectory of your working directory, such as, <code class="path">data/widgets_gadgets.xlsx</code>, load it in using a <a class="glossary" target="_blank" title="The location of a file in relation to the working directory." href="https://psyteachr.github.io/glossary/r#relative-path">relative path</a> so that it is accessible if you move the working directory to another location or computer:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/widgets_gadgets.xlsx"</span><span class="op">)</span>  <span class="co"># correct</span></code></pre></div>
<p>Do not load it in using an <a class="glossary" target="_blank" title="A file path that starts with / and is not appended to the working directory" href="https://psyteachr.github.io/glossary/a#absolute-path">absolute path</a>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"C:/Carla's_files/yearly_reports/2020-2021/data/widgets_gadgets.xlsx"</span><span class="op">)</span>   <span class="co"># wrong</span></code></pre></div>
<div class="info">
<p>Also note the convention of using forward slashes, unlike the Windows-specific convention of using backward slashes. This is to make references to files platform independent.</p>
</div>
</div>
<div id="naming-things" class="section level3" number="2.4.2">
<h3>
<span class="header-section-number">2.4.2</span> Naming Things<a class="anchor" aria-label="anchor" href="#naming-things"><i class="fas fa-link"></i></a>
</h3>
<p>Name files so that both people and computers can easily find things. Here are some important principles:</p>
<ul>
<li>file and directory names should only contain letters, numbers, dashes, and underscores, with a full stop (<code>.</code>) between the file name and <a class="glossary" target="_blank" title="The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd)." href="https://psyteachr.github.io/glossary/e#extension">extension</a> (that means no spaces!)</li>
<li>be consistent with capitalisation (I prefer to never use it to make it easy to remember)</li>
<li>use underscores (<code>_</code>) to separate parts of the file name, and dashes (<code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code>) to separate words in a section</li>
<li>name files with a pattern that alphabetises in a sensible order and makes it easy for you to find the file you're looking for</li>
<li>prefix a filename with an underscore to move it to the top of the list, or prefix all files with numbers to control their order</li>
</ul>
<p>For example, these file names are a mess:</p>
<ul>
<li><code class="path">report.doc</code></li>
<li><code class="path">report final.doc</code></li>
<li><code class="path">Data (Customers) 11-15.xls</code></li>
<li><code class="path">Customers Data Nov 12.xls</code></li>
<li><code class="path">final report2.doc</code></li>
<li><code class="path">project notes.txt</code></li>
<li><code class="path">Vendor Data November 15.xls</code></li>
</ul>
<p>Here is one way to structure them so that similar files have the same structure and it's easy for a human to scan the list or to use code to find relevant files. See if you can figure out what the last one should be.</p>
<ul>
<li><code class="path">_project-notes.txt</code></li>
<li><code class="path">report_v1.doc</code></li>
<li><code class="path">report_v2.doc</code></li>
<li><code class="path">report_v3.doc</code></li>
<li><code class="path">data_customer_2021-11-12.xls</code></li>
<li><code class="path">data_customer_2021-11-15.xls</code></li>
<li><select class="webex-solveme" data-answer='["data_vendor_2021-11-15.xls"]'><option></option>
<option>vendor-data_2021-11-15.xls</option>
<option>data-vendor-2021_11_15.xls</option>
<option>data_vendor_2021-11-15.xls</option>
<option>data_2021-11-15_vendor.xls</option></select></li>
</ul>
<div class="try">
<p>Think of other ways to name the files above. Look at some of your own project files and see what you can improve.</p>
</div>
</div>
</div>
<div id="r-markdown" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> R Markdown<a class="anchor" aria-label="anchor" href="#r-markdown"><i class="fas fa-link"></i></a>
</h2>
<p>In this lesson, we will learn to make an R Markdown document with a table of contents, appropriate headers, tables, images, and inline R.</p>
<p>We will use <a class="glossary" target="_blank" title="The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code." href="https://psyteachr.github.io/glossary/r#r-markdown">R Markdown</a> to create reproducible reports, which enables mixing of text and code. A reproducible script will contain sections of code in code blocks. A code block starts and ends with three backtick symbols in a row, with some information about the code between curly brackets, such as <code>{r chunk-name, echo=FALSE}</code> (this runs the code, but does not show the text of the code block in the compiled document). The text outside of code blocks is written in <a class="glossary" target="_blank" title="A way to specify formatting, such as headers, paragraphs, lists, bolding, and links." href="https://psyteachr.github.io/glossary/m#markdown">markdown</a>, which is a way to specify formatting, such as headers, paragraphs, lists, bolding, and links.</p>
<p>If you open up a new R Markdown file from a template, you will see an example document with several code blocks in it. To create an HTML or PDF report from an R Markdown (Rmd) document, you compile it. Compiling a document is called <a class="glossary" target="_blank" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document" href="https://psyteachr.github.io/glossary/k#knit">knitting</a> in RStudio. There is a button that looks like a ball of yarn with needles through it that you click on to compile your file into a report.</p>
<div class="try">
<p>Create a new R Markdown file from the <strong><code>File &gt; New File &gt; R Markdown...</code></strong> menu. Change the title and author, then click the knit button to create an html file.</p>
</div>
<div id="yaml-header" class="section level3" number="2.5.1">
<h3>
<span class="header-section-number">2.5.1</span> YAML Header<a class="anchor" aria-label="anchor" href="#yaml-header"><i class="fas fa-link"></i></a>
</h3>
<p>The <a class="glossary" target="_blank" title="A structured format for information" href="https://psyteachr.github.io/glossary/y#yaml">YAML</a> header is where you can set several options.</p>
<pre><code>---
title: "My Demo Document"
author: "Me"
output:
  html_document:
    df_print: kable
    theme: 
      version: 4
      bootswatch: yeti
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    toc_depth: 3
    number_sections: false
---</code></pre>
<div class="info">
<p>Try changing the values from <code>false</code> to <code>true</code> to see what the options do.</p>
</div>
<p>The <code>df_print: kable</code> option prints data frames using <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">knitr::kable</a></code>. You'll learn below how to further customise tables.</p>
<p>The built-in bootswatch themes are: default, cerulean, cosmo, darkly, flatly, journal, lumen, paper, readable, sandstone, simplex, spacelab, united, and yeti. You can <a href="https://bootswatch.com/4/">view and download more themes</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:img-bootswatch"></span>
<img src="images/bootswatch.png" alt="Light themes in versions 3 and 4." width="100%"><p class="caption">
Figure 2.1: Light themes in versions 3 and 4.
</p>
</div>
</div>
<div id="setup" class="section level3" number="2.5.2">
<h3>
<span class="header-section-number">2.5.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup"><i class="fas fa-link"></i></a>
</h3>
<p>When you create a new R Markdown file in RStudio, a setup chunk is automatically created.</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r setup, include=FALSE}</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>echo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<p>You can set more default options for your document here.</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r setup, include=FALSE}</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>
  fig.width  <span class="op">=</span> <span class="fl">8</span>, 
  fig.height <span class="op">=</span> <span class="fl">5</span>, 
  fig.path   <span class="op">=</span> <span class="st">'images/'</span>,
  echo       <span class="op">=</span> <span class="cn">FALSE</span>, 
  warning    <span class="op">=</span> <span class="cn">TRUE</span>, 
  message    <span class="op">=</span> <span class="cn">FALSE</span>,
  cache      <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<p>The code above sets the following options:</p>
<ul>
<li>
<code>fig.width  = 8</code> : default figure width is 8 inches (you can change this for individual figures)</li>
<li>
<code>fig.height = 5</code> : default figure height is 5 inches</li>
<li>
<code>fig.path   = 'images/'</code> : figures are saved in the directory "images"</li>
<li>
<code>echo       = FALSE</code> : do not show code chunks in the rendered document</li>
<li>
<code>warning    = FALSE</code> : do not show any function warnings</li>
<li>
<code>message    = FALSE</code> : do not show any function messages</li>
<li>
<code>cache      = FALSE</code> : run all the code to create all of the images and objects each time you knit (set to <code>TRUE</code> if you have time-consuming code)</li>
</ul>
<p>Find a list of the current chunk options by typing <code><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code> in the console. See the <a href="https://yihui.name/knitr/options/" target="_blank">knitr options documentation</a> for explanations of the possible options.</p>
<p>You can also add the packages you need in this chunk using <code><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="op">)</span></code>. Often when you are working on a script, you will realize that you need to load another add-on package. Don't bury the call to <code><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">package_I_need</span><span class="op">)</span></code> way down in the script. Put it in the top, so the user has an overview of what packages are needed.</p>
<div class="try">
<p>We'll frequently use functions from the package <code class="package">tidyverse</code>, so load that in your setup chunk using the code <select class="webex-solveme" data-answer='["library(tidyverse)"]'><option></option>
<option>install.packages("tidyverse")</option>
<option>library(tidyverse)</option>
<option>load(tidyverse)</option></select></p>
</div>
</div>
<div id="structure" class="section level3" number="2.5.3">
<h3>
<span class="header-section-number">2.5.3</span> Markdown<a class="anchor" aria-label="anchor" href="#structure"><i class="fas fa-link"></i></a>
</h3>
<p>You can use the visual <a class="glossary" target="_blank" title="A way to specify formatting, such as headers, paragraphs, lists, bolding, and links." href="https://psyteachr.github.io/glossary/m#markdown">markdown</a> editor if you have RStudio version 1.4 or higher. This will be a button at the top of the source pane with a pen tip. This is useful for complex styling, but you can also use these common plain-text style markups:</p>
<ul>
<li>Headers are created by prefacing subtitles with one or more hashes (<code>#</code>). If you include a table of contents (<code>toc</code>) in the YAML, it is created from your document headers.</li>
<li>Format text with <em>italics</em> or <strong>bold</strong> by surrounding the text with one or two asterisks or underscores.</li>
<li>Make lists using numbers, asterisks or dashes before items. Indent items to make nested lists.</li>
<li>Make links like this: <code>[psyTeachR](https://psyteachr.github.io/)</code>
</li>
</ul>
<p>Download the <a href="http://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">R Markdown Cheat Sheet</a> to learn more.</p>
<div class="try">
<p>Delete the default text and add some structure to your document by creating headers and subheaders. We're going to present a summary table and plot the data.</p>
</div>
</div>
<div id="code-chunks" class="section level3" number="2.5.4">
<h3>
<span class="header-section-number">2.5.4</span> Code Chunks<a class="anchor" aria-label="anchor" href="#code-chunks"><i class="fas fa-link"></i></a>
</h3>
<p>You can include <a class="glossary" target="_blank" title="A section of code in an R Markdown file" href="https://psyteachr.github.io/glossary/c#chunk">code chunks</a> that create and display images, tables, or computations to include in your text. Let's start by loading some data.</p>
<p>First, create a code chunk in your document. You can type in the backticks and chunk header manually, or use a keyboard shortcut (alt-cmd-I). This code loads some data from the web.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># https://www.kaggle.com/kyanyoga/sample-sales-data</span>
<span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/sales_data_sample.csv"</span><span class="op">)</span></code></pre></div>
<p>You can add comments inside R chunks with the hash symbol (<code>#</code>). The R interpreter will ignore characters from the hash to the end of the line.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># important numbers</span>

<span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">sales</span><span class="op">)</span> <span class="co"># the total number of sales</span>
<span class="va">first</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">sales</span><span class="op">$</span><span class="va">YEAR_ID</span><span class="op">)</span> <span class="co"># the first year in the table</span>
<span class="va">last</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">sales</span><span class="op">$</span><span class="va">YEAR_ID</span><span class="op">)</span> <span class="co"># the last year in the table</span></code></pre></div>
<p>It's usually good practice to start a code chunk with a comment that explains what you're doing there, especially if the code is not explained in the text of the report.</p>
<p>If you name your objects clearly, you often don't need to add clarifying comments. For example, if I'd named the three objects above <code>total_number_of_sales</code>, <code>first_year</code> and <code>last_year</code>, I would omit the comments. It's a bit of an art to comment your code well.</p>
</div>
<div id="tables" class="section level3" number="2.5.5">
<h3>
<span class="header-section-number">2.5.5</span> Tables<a class="anchor" aria-label="anchor" href="#tables"><i class="fas fa-link"></i></a>
</h3>
<p>Next, create a code chunk where you want to display a summary table. We'll use tidyverse functions you will learn in the <a href="#tidyr">data wrangling lectures</a> to count the number of products per year for each product line.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="va">sales</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">YEAR_ID</span>, <span class="va">PRODUCTLINE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">count</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">spread</span><span class="op">(</span>key <span class="op">=</span> <span class="va">YEAR_ID</span>, value <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 4
## # Groups:   PRODUCTLINE [7]
##   PRODUCTLINE      `2003` `2004` `2005`
##   &lt;chr&gt;             &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
## 1 Classic Cars        366    442    159
## 2 Motorcycles         109    164     58
## 3 Planes               85    161     60
## 4 Ships                81    115     38
## 5 Trains               28     37     12
## 6 Trucks and Buses    110    142     49
## 7 Vintage Cars        221    284    102</code></pre>
<p>The table above is OK, but it could be more reader-friendly by changing the column labels and adding a caption. You can also use more specialised functions from <code class="package">kableExtra</code> to format your tables. These are very powerful, but take practice.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">summary_table</span>, 
      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"2003"</span>, <span class="st">"2004"</span>, <span class="st">"2005"</span><span class="op">)</span>,
      caption <span class="op">=</span> <span class="st">"Number of sales per product line each year."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Product Lines"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"Sales"</span> <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, line <span class="op">=</span> <span class="cn">F</span>, bold <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/row_spec.html">row_spec</a></span><span class="op">(</span><span class="fl">0</span>, color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">1</span>, bold <span class="op">=</span> <span class="cn">T</span>, border_right <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># highlight sales over 200 in red</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">2</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">$</span><span class="va">`2003`</span> <span class="op">&gt;</span> <span class="fl">200</span>, <span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">3</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">$</span><span class="va">`2004`</span> <span class="op">&gt;</span> <span class="fl">200</span>, <span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/column_spec.html">column_spec</a></span><span class="op">(</span><span class="fl">4</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">$</span><span class="va">`2005`</span> <span class="op">&gt;</span> <span class="fl">200</span>, <span class="st">"red"</span>, <span class="st">"black"</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<div class="inline-table"><table class=" lightable-classic" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:unnamed-chunk-5">Table 2.1: </span>Number of sales per product line each year.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="1">
<div style="">
Product Lines
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="3">
<div style="">
Sales
</div>
</th>
</tr>
<tr>
<th style="text-align:left;color: grey !important;">
</th>
<th style="text-align:right;color: grey !important;">
2003
</th>
<th style="text-align:right;color: grey !important;">
2004
</th>
<th style="text-align:right;color: grey !important;">
2005
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Classic Cars
</td>
<td style="text-align:right;color: red !important;">
366
</td>
<td style="text-align:right;color: red !important;">
442
</td>
<td style="text-align:right;color: black !important;">
159
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Motorcycles
</td>
<td style="text-align:right;color: black !important;">
109
</td>
<td style="text-align:right;color: black !important;">
164
</td>
<td style="text-align:right;color: black !important;">
58
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Planes
</td>
<td style="text-align:right;color: black !important;">
85
</td>
<td style="text-align:right;color: black !important;">
161
</td>
<td style="text-align:right;color: black !important;">
60
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Ships
</td>
<td style="text-align:right;color: black !important;">
81
</td>
<td style="text-align:right;color: black !important;">
115
</td>
<td style="text-align:right;color: black !important;">
38
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Trains
</td>
<td style="text-align:right;color: black !important;">
28
</td>
<td style="text-align:right;color: black !important;">
37
</td>
<td style="text-align:right;color: black !important;">
12
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Trucks and Buses
</td>
<td style="text-align:right;color: black !important;">
110
</td>
<td style="text-align:right;color: black !important;">
142
</td>
<td style="text-align:right;color: black !important;">
49
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Vintage Cars
</td>
<td style="text-align:right;color: red !important;">
221
</td>
<td style="text-align:right;color: red !important;">
284
</td>
<td style="text-align:right;color: black !important;">
102
</td>
</tr>
</tbody>
</table></div>
<div class="try">
<p>See how many different ways you can style the table above. Use the <a href="https://haozhu233.github.io/kableExtra/awesome_table_in_html.html" target="_blank">kableExtra vignette</a> for inspiration.</p>
</div>
</div>
<div id="images" class="section level3" number="2.5.6">
<h3>
<span class="header-section-number">2.5.6</span> Images<a class="anchor" aria-label="anchor" href="#images"><i class="fas fa-link"></i></a>
</h3>
<p>Next, create a code chunk where you want to display an image in your document. Let's put it after the table. We'll use some code that you'll learn more about in Chapter <a href="viz.html#viz">3</a> to show the range of sales within each country.</p>
<p>Notice how the figure caption is formatted in the chunk options.</p>
<div class="verbatim">
<pre class="sourceCode r"><code class="sourceCode R">```{r item-by-line, fig.cap="The number of items in each order by product line."}</code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">sales</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">COUNTRY</span>, y <span class="op">=</span> <span class="va">SALES</span>, fill <span class="op">=</span> <span class="va">COUNTRY</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_violin</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">xlab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Sales per order"</span>, 
                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">14000</span>, <span class="fl">2000</span><span class="op">)</span>, 
                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"£"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">14</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"K"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_fill_viridis_d</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, family <span class="op">=</span> <span class="st">"Times"</span><span class="op">)</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, vjust <span class="op">=</span> <span class="fl">1</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:item-by-line"></span>
<img src="02-reports_files/figure-html/item-by-line-1.png" alt="The number of items in each order by product line." width="100%"><p class="caption">
Figure 2.2: The number of items in each order by product line.
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode R">```</code></pre>
</div>
<p>![All the Things by <a href="images/memes/x-all-the-things.png">Hyperbole and a Half</a>{float: right; style="width:50%"} You can also include images that you did not create in R using the markdown syntax for images:</p>
<pre><code>![All the Things by Hyperbole and a Half](images/memes/x-all-the-things.png){style="float: right; width:50%"}</code></pre>
</div>
<div id="in-line-r" class="section level3" number="2.5.7">
<h3>
<span class="header-section-number">2.5.7</span> In-line R<a class="anchor" aria-label="anchor" href="#in-line-r"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes you just need to insert a number from the data into some text in your report. Inline R code lets you do that. First, we'll calculate the total number of sales per year in a code block. This block can be hidden in the final report.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sales_per_year</span> <span class="op">&lt;-</span> <span class="va">sales</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">YEAR_ID</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">SALES</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="co"># this adds commas as thousands separators</span>
  <span class="fu">mutate</span><span class="op">(</span>fmt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">total</span>, big.mark<span class="op">=</span><span class="st">","</span><span class="op">)</span><span class="op">)</span>

<span class="va">sales03</span> <span class="op">&lt;-</span> <span class="va">sales_per_year</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">YEAR_ID</span> <span class="op">==</span> <span class="fl">2003</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">fmt</span><span class="op">)</span>
<span class="va">sales04</span> <span class="op">&lt;-</span> <span class="va">sales_per_year</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">YEAR_ID</span> <span class="op">==</span> <span class="fl">2004</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">fmt</span><span class="op">)</span>
<span class="va">sales05</span> <span class="op">&lt;-</span> <span class="va">sales_per_year</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">YEAR_ID</span> <span class="op">==</span> <span class="fl">2005</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">fmt</span><span class="op">)</span></code></pre></div>
<p>You can insert the results into a paragraph with inline R code that looks like this:</p>
<pre><code>The total sales per year were 
£3,516,980 (2003), 
£4,724,163 (2004), and 
£1,791,487 (2005).</code></pre>
<p><strong>Rendered text:</strong></p>
<p>The total sales per year were £3,516,980 (2003), £4,724,163 (2004), and £1,791,487 (2005).</p>
<div class="info">
<p>In a markdown document, new paragraphs are only created when you skip a blank line. If you include a single line break in a sentence, like above, it won't show up in the report. This can be a good way to organise complicated text with inline code.</p>
</div>
</div>
<div id="output-formats" class="section level3" number="2.5.8">
<h3>
<span class="header-section-number">2.5.8</span> Output Formats<a class="anchor" aria-label="anchor" href="#output-formats"><i class="fas fa-link"></i></a>
</h3>
<p>You can knit your file to PDF or Word if you have the right packages installed on your computer. You can also create presentations, dashboards, websites, and even books with R markdown, which we'll learn more about in Chapter <a href="present.html#present">9</a>. In fact, the book you are reading right now was created using R markdown.</p>
</div>
</div>
<div id="data-types" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Data Types<a class="anchor" aria-label="anchor" href="#data-types"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="glossary-reports" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Glossary<a class="anchor" aria-label="anchor" href="#glossary-reports"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:left;">
definition
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/a.html#absolute-path" class="glossary" target="_blank">absolute path</a>
</td>
<td style="text-align:left;">
A file path that starts with / and is not appended to the working directory
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/c.html#chunk" class="glossary" target="_blank">chunk</a>
</td>
<td style="text-align:left;">
A section of code in an R Markdown file
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/d.html#directory" class="glossary" target="_blank">directory</a>
</td>
<td style="text-align:left;">
A collection or “folder” of files on a computer.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/e.html#extension" class="glossary" target="_blank">extension</a>
</td>
<td style="text-align:left;">
The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/k.html#knit" class="glossary" target="_blank">knit</a>
</td>
<td style="text-align:left;">
To create an HTML, PDF, or Word document from an R Markdown (Rmd) document
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/m.html#markdown" class="glossary" target="_blank">markdown</a>
</td>
<td style="text-align:left;">
A way to specify formatting, such as headers, paragraphs, lists, bolding, and links.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/p.html#project" class="glossary" target="_blank">project</a>
</td>
<td style="text-align:left;">
A way to organise related files in RStudio
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#r-markdown" class="glossary" target="_blank">r markdown</a>
</td>
<td style="text-align:left;">
The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/r.html#relative-path" class="glossary" target="_blank">relative path</a>
</td>
<td style="text-align:left;">
The location of a file in relation to the working directory.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/w.html#working-directory" class="glossary" target="_blank">working directory</a>
</td>
<td style="text-align:left;">
The filepath where R is currently reading and writing files.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="https://psyteachr.github.io/glossary/y.html#yaml" class="glossary" target="_blank">yaml</a>
</td>
<td style="text-align:left;">
A structured format for information
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );
});
</script><div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">1</span> Intro to R, RStudio and R Markdown</a></div>
<div class="next"><a href="viz.html"><span class="header-section-number">3</span> Basic Data Visualisation</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#reports"><span class="header-section-number">2</span> Reports with R Markdown</a></li>
<li><a class="nav-link" href="#ilo-reports"><span class="header-section-number">2.1</span> Intended Learning Outcomes</a></li>
<li><a class="nav-link" href="#resources-repro"><span class="header-section-number">2.2</span> Resources</a></li>
<li><a class="nav-link" href="#setup-repro"><span class="header-section-number">2.3</span> Setup</a></li>
<li>
<a class="nav-link" href="#projects"><span class="header-section-number">2.4</span> Organising a project</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#working-directory"><span class="header-section-number">2.4.1</span> Working Directory</a></li>
<li><a class="nav-link" href="#naming-things"><span class="header-section-number">2.4.2</span> Naming Things</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#r-markdown"><span class="header-section-number">2.5</span> R Markdown</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#yaml-header"><span class="header-section-number">2.5.1</span> YAML Header</a></li>
<li><a class="nav-link" href="#setup"><span class="header-section-number">2.5.2</span> Setup</a></li>
<li><a class="nav-link" href="#structure"><span class="header-section-number">2.5.3</span> Markdown</a></li>
<li><a class="nav-link" href="#code-chunks"><span class="header-section-number">2.5.4</span> Code Chunks</a></li>
<li><a class="nav-link" href="#tables"><span class="header-section-number">2.5.5</span> Tables</a></li>
<li><a class="nav-link" href="#images"><span class="header-section-number">2.5.6</span> Images</a></li>
<li><a class="nav-link" href="#in-line-r"><span class="header-section-number">2.5.7</span> In-line R</a></li>
<li><a class="nav-link" href="#output-formats"><span class="header-section-number">2.5.8</span> Output Formats</a></li>
</ul>
</li>
<li><a class="nav-link" href="#data-types"><span class="header-section-number">2.6</span> Data Types</a></li>
<li><a class="nav-link" href="#glossary-reports"><span class="header-section-number">2.7</span> Glossary</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/ads-v1/blob/master/book/02-reports.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/ads-v1/edit/master/book/02-reports.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Applied Data Skills</strong>: Processing &amp; Presenting Data" was written by Emily Nordmann and Lisa DeBruine. It was last built on 2021-08-31.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
