[{"path":"index.html","id":"overview","chapter":"Overview","heading":"Overview","text":"book provides overview basic skills needed turn raw data informative summaries visualisations presented professional reports, presentations, dashboards. book introduce learners R (R Core Team, 2021), programming language can help automate working data. book cover importing processing data spreadsheets, producing data summaries descriptive statistics tables, creating beautiful informative visualisations, constructing reports, presentations, dashboards automatically update underlying data changes.end book, able use R :clean process datasummarise datainformatively visualise datacreate reusable report templates","code":""},{"path":"intro.html","id":"intro","chapter":"1 Intro to R, RStudio and R Markdown","heading":"1 Intro to R, RStudio and R Markdown","text":"","code":""},{"path":"intro.html","id":"ilo-intro","chapter":"1 Intro to R, RStudio and R Markdown","heading":"1.1 Intended Learning Outcomes","text":"Understand structure content courseInstall R RStudioUnderstand reproducibility","code":""},{"path":"reports.html","id":"reports","chapter":"2 Reports with R Markdown","heading":"2 Reports with R Markdown","text":"","code":""},{"path":"reports.html","id":"ilo-reports","chapter":"2 Reports with R Markdown","heading":"2.1 Intended Learning Outcomes","text":"able knit simple reproducible report R MarkdownBe able edit Markdown show/hide code use inline codingBe able identify different types dataYou'll learn following functions chapter:knitr::opts_chunk$set()kableExtra::kable()kableExtra::add_header_above()kableExtra::row_spec()kableExtra::column_spec()kableExtra::kable_classic()chapter also examples uses functions learn later chapters. worry learning functions week; just copy examples practice script.","code":""},{"path":"reports.html","id":"setup-repro","chapter":"2 Reports with R Markdown","heading":"2.2 Setup","text":"","code":"\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)"},{"path":"reports.html","id":"projects","chapter":"2 Reports with R Markdown","heading":"2.3 Organising a project","text":"First, need get organised.Projects RStudio way group files need one project. projects include scripts, data files, output files like PDF version script images.Make new directory keep materials class.Choose New Project... File menu create new project called 02-reports directory.","code":""},{"path":"reports.html","id":"working-directory","chapter":"2 Reports with R Markdown","heading":"2.3.1 Working Directory","text":"put files? usually want scripts data files inside one folder computer, working directory. can organise files subdirectories inside main project directory, putting raw data files directory called data saving image files directory called images.script reference files three locations, using appropriate format.Never set change working directory script.R Markdown files automatically use directory .Rmd file working directory.script needs file subdirectory working directory, , data/widgets_gadgets.xlsx, load using relative path accessible move working directory another location computer:load using absolute path:Also note convention using forward slashes, unlike Windows-specific convention using backward slashes. make references files work everyone, regardless operating system.","code":"\ndat <- read_csv(\"data/widgets_gadgets.xlsx\")  # correct\ndat <- read_csv(\"C:/Carla's_files/yearly_reports/2020-2021/data/widgets_gadgets.xlsx\")   # wrong"},{"path":"reports.html","id":"naming-things","chapter":"2 Reports with R Markdown","heading":"2.3.2 Naming Things","text":"Name files people computers can easily find things. important principles:file directory names contain letters, numbers, dashes, underscores, full stop (.) file name extension (means spaces!)consistent capitalisation (prefer never use make easy remember)use underscores (_) separate parts file name, dashes (-) separate words sectionname files pattern alphabetises sensible order makes easy find file looking forprefix filename underscore move top list, prefix files numbers control orderFor example, file names mess:report.docreport final.docData (Customers) 11-15.xlsCustomers Data Nov 12.xlsfinal report2.docproject notes.txtVendor Data November 15.xlsHere one way structure similar files structure easy human scan list use code find relevant files. See can figure last one ._project-notes.txtreport_v1.docreport_v2.docreport_v3.docdata_customer_2021-11-12.xlsdata_customer_2021-11-15.xlsvendor-data_2021-11-15.xlsdata-vendor-2021_11_15.xlsdata_vendor_2021-11-15.xlsdata_2021-11-15_vendor.xlsThink ways name files . Look project files see can improve.","code":""},{"path":"reports.html","id":"rmarkdown","chapter":"2 Reports with R Markdown","heading":"2.4 R Markdown","text":"lesson, learn make R Markdown document table contents, appropriate headers, tables, images, inline R.use R Markdown create reproducible reports, enables mixing text code. reproducible script mixes blocks text code. text can written using markdown, way specify formatting, headers, paragraphs, lists, bolding, links.open new R Markdown file template, see example document several code blocks . create HTML PDF report R Markdown (Rmd) document, compile . Compiling document called knitting RStudio. button looks like ball yarn needles click compile file report.Create new R Markdown file File > New File > R Markdown... menu. Change title author, click knit button create html file.","code":""},{"path":"reports.html","id":"yaml","chapter":"2 Reports with R Markdown","heading":"2.4.1 YAML Header","text":"YAML header can set several options.Try changing values false true see options .df_print: kable option prints data frames using knitr::kable. learn customise tables.built-bootswatch themes : default, cerulean, cosmo, darkly, flatly, journal, lumen, paper, readable, sandstone, simplex, spacelab, united, yeti. can view download themes.\nFigure 2.1: Light themes versions 3 4.\n","code":"---\ntitle: \"My Demo Document\"\nauthor: \"Me\"\noutput:\n  html_document:\n    df_print: kable\n    theme: \n      version: 4\n      bootswatch: yeti\n    toc: true\n    toc_float:\n      collapsed: false\n      smooth_scroll: false\n    toc_depth: 3\n    number_sections: false\n---"},{"path":"reports.html","id":"setup-rmarkdown","chapter":"2 Reports with R Markdown","heading":"2.4.2 Setup","text":"create new R Markdown file RStudio, setup chunk automatically created.can set default options document .code sets following options:fig.width  = 8 : default figure width 8 inches (can change individual figures)fig.height = 5 : default figure height 5 inchesfig.path   = 'images/' : figures saved directory \"images\"echo       = FALSE : show code chunks rendered documentwarning    = FALSE : show function warningsmessage    = FALSE : show function messagescache      = FALSE : run code create images objects time knit (set TRUE time-consuming code)Find list current chunk options typing str(knitr::opts_chunk$get()) console. See knitr options documentation explanations possible options.can also add packages need chunk using library(). Often working script, realize need load another add-package. bury call library(package_I_need) way script. Put top, user overview packages needed.frequently use functions package tidyverse, load setup chunk using code install.packages(\"tidyverse\")library(tidyverse)load(tidyverse)","code":"```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)``````{r setup, include=FALSE}\nknitr::opts_chunk$set(\n  fig.width  = 8, \n  fig.height = 5, \n  fig.path   = 'images/',\n  echo       = FALSE, \n  warning    = TRUE, \n  message    = FALSE,\n  cache      = FALSE\n)```"},{"path":"reports.html","id":"markdown","chapter":"2 Reports with R Markdown","heading":"2.4.3 Markdown","text":"can use visual markdown editor RStudio version 1.4 higher. button top source pane pen tip. useful complex styling, can also use common plain-text style markups:Headers created prefacing subtitles one hashes (#). include table contents (toc) YAML, created document headers.Format text italics bold surrounding text one two asterisks underscores.Make lists using numbers, asterisks dashes items. Indent items make nested lists.Make links like : [psyTeachR](https://psyteachr.github.io/)Download R Markdown Cheat Sheet learn .Delete default text add structure document creating headers subheaders. going present summary table plot data.","code":""},{"path":"reports.html","id":"code-chunks","chapter":"2 Reports with R Markdown","heading":"2.4.4 Code Chunks","text":"can include code chunks create display images, tables, computations include text. code block starts ends three backtick symbols row. first three backticks, information code curly brackets, {r chunk-name, echo=FALSE} (runs code, show text code block compiled document).start loading data.First, create code chunk document. can type backticks chunk header manually, use keyboard shortcut (alt-cmd-). code loads data web.can add comments inside R chunks hash symbol (#). R interpreter ignore characters hash end line.usually good practice start code chunk comment explains , especially code explained text report.name objects clearly, often need add clarifying comments. example, named three objects total_number_of_sales, first_year last_year, omit comments. bit art comment code well.","code":"```{r}\n# Data from https://www.kaggle.com/kyanyoga/sample-sales-data\nsales <- read_csv(\"data/sales_data_sample.csv\")```\n# important numbers\n\nn <- nrow(sales) # the total number of sales\nfirst <- min(sales$YEAR_ID) # the first year in the table\nlast <- max(sales$YEAR_ID) # the last year in the table"},{"path":"reports.html","id":"rmd-tables","chapter":"2 Reports with R Markdown","heading":"2.4.5 Tables","text":"Next, create code chunk want display summary table. use tidyverse functions learn data wrangling lectures count number products per year product line.table OK, reader-friendly changing column labels adding caption. can also use specialised functions kableExtra format tables. powerful, take practice.\nTable 2.1: Number sales per product line year.\nSee many different ways can style table . Use kableExtra vignette inspiration.","code":"\nsummary_table <- sales %>%\n  group_by(YEAR_ID, PRODUCTLINE) %>%\n  count() %>%\n  pivot_wider(id_cols = PRODUCTLINE,\n              names_from = YEAR_ID, \n              values_from = n) %>%\n  print()## # A tibble: 7 x 4\n## # Groups:   PRODUCTLINE [7]\n##   PRODUCTLINE      `2003` `2004` `2005`\n##   <chr>             <int>  <int>  <int>\n## 1 Classic Cars        366    442    159\n## 2 Motorcycles         109    164     58\n## 3 Planes               85    161     60\n## 4 Ships                81    115     38\n## 5 Trains               28     37     12\n## 6 Trucks and Buses    110    142     49\n## 7 Vintage Cars        221    284    102\nkable(summary_table, \n      col.names = c(\"\", \"2003\", \"2004\", \"2005\"),\n      caption = \"Number of sales per product line each year.\") %>%\n  add_header_above(c(\"Product Lines\" = 1, \"Sales\" = 3), line = F, bold = T) %>%\n  # change the header style\n  row_spec(0, color = \"grey\") %>%\n  # change the table style\n  kable_classic(full_width = F) %>%\n  # make the first column bold with a border to the right\n  column_spec(1, bold = T, border_right = T) %>%\n  # highlight sales over 200 in red\n  column_spec(2, color = ifelse(summary_table$`2003` > 200, \"red\", \"black\")) %>%\n  column_spec(3, color = ifelse(summary_table$`2004` > 200, \"red\", \"black\")) %>%\n  column_spec(4, color = ifelse(summary_table$`2005` > 200, \"red\", \"black\")) "},{"path":"reports.html","id":"rmd-images","chapter":"2 Reports with R Markdown","heading":"2.4.6 Images","text":"Next, create code chunk want display image document. put table. use code learn Chapter 3 show range sales within country.Notice figure caption formatted chunk options.\nFigure 2.2: number items order product line.\n![Things Hyperbole Half{float: right; style=\"width:50%\"} can also include images create R using markdown syntax images:","code":"```{r item-by-line, fig.cap=\"The number of items in each order by product line.\"}\nggplot(sales, aes(x = COUNTRY, y = SALES, fill = COUNTRY)) +\n  geom_violin(alpha = 0.5, show.legend = FALSE) +\n  xlab(\"\") +\n  scale_y_continuous(name = \"Sales per order\", \n                     breaks = seq(0, 14000, 2000), \n                     labels = paste0(\"£\", seq(0, 14, 2), \"K\")) +\n  scale_fill_viridis_d() +\n  theme(text = element_text(size = 20, family = \"Times\"),\n        axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))```![All the Things by Hyperbole and a Half](images/memes/x-all-the-things.png){style=\"float: right; width:50%\"}"},{"path":"reports.html","id":"rmd-inline-r","chapter":"2 Reports with R Markdown","heading":"2.4.7 Inline R","text":"Sometimes just need insert number data text report. Inline R code lets . First, calculate total number sales per year code block. block can hidden final report.can insert results paragraph inline R code looks like :Rendered text:total sales per year £3,516,980 (2003), £4,724,163 (2004), £1,791,487 (2005).markdown document, new paragraphs created skip blank line. include single line break sentence, like , show report. can good way organise complicated text inline code.","code":"\nsales_per_year <- sales %>%\n  group_by(YEAR_ID) %>%\n  summarise(total = sum(SALES)) %>%\n  # this adds commas as thousands separators\n  mutate(fmt = format(total, big.mark=\",\"))\n\nsales03 <- sales_per_year %>% filter(YEAR_ID == 2003) %>% pull(fmt)\nsales04 <- sales_per_year %>% filter(YEAR_ID == 2004) %>% pull(fmt)\nsales05 <- sales_per_year %>% filter(YEAR_ID == 2005) %>% pull(fmt)The total sales per year were \n£3,516,980 (2003), \n£4,724,163 (2004), and \n£1,791,487 (2005)."},{"path":"reports.html","id":"knit","chapter":"2 Reports with R Markdown","heading":"2.4.8 Output Formats","text":"can knit using knit button top source pane. can also type following code console (substituting file name). Never put Rmd script , try knit infinite loop.can knit file PDF Word right packages installed computer. can also create presentations, dashboards, websites, even books R markdown, learn Chapter 9. fact, book reading right now created using R markdown.","code":"\nknitr::knit2html(\"report.Rmd\")"},{"path":"reports.html","id":"glossary-reports","chapter":"2 Reports with R Markdown","heading":"2.5 Glossary","text":"","code":""},{"path":"reports.html","id":"resources-repro","chapter":"2 Reports with R Markdown","heading":"2.6 Further Resources","text":"R Markdown Cheat SheetkableExtraR Markdown reference GuideR Markdown TutorialR Markdown: Definitive Guide Yihui Xie, J. J. Allaire, & Garrett GrolemundProject Structure Danielle NavarroHow name files Jenny Bryan","code":""},{"path":"reports.html","id":"exercises-reports","chapter":"2 Reports with R Markdown","heading":"2.7 Exercises","text":"","code":""},{"path":"reports.html","id":"exercises-reports-project","chapter":"2 Reports with R Markdown","heading":"2.7.1 New project","text":"Create new project called \"demo_report\" [section 2.3]","code":""},{"path":"reports.html","id":"exercises-reports-setup","chapter":"2 Reports with R Markdown","heading":"2.7.2 Set up an R Markdown script","text":"\"demo_report\" project, create new Rmarkdown document called \"job.Rmd\" [section 2.4]. Edit YAML header output tables using kable. Set custom theme. [section 2.4.1]","code":"---\ntitle: \"My Job\"\nauthor: \"Me\"\noutput:\n  html_document:\n    df_print: kable\n    theme: \n      version: 4\n      bootswatch: sandstone\n---"},{"path":"reports.html","id":"exercises-reports-rmarkdown","chapter":"2 Reports with R Markdown","heading":"2.7.3 R Markdown","text":"Write short paragraph describing job [section 2.4.3]. Include bullet-point list links websites useful job [section 2.4.3].","code":"I am a research psychologist who is interested in open science \nand teaching computational skills.\n\n* [psyTeachR books](https://psyteachr.github.io/)\n* [Google Scholar](https://scholar.google.com/)"},{"path":"reports.html","id":"exercises-reports-tables","chapter":"2 Reports with R Markdown","heading":"2.7.4 Tables","text":"Use following code load small table tasks [section 2.4.4]. Edit relevant job (can change categories entirely want).Figure make code chunks show knitted document [section 2.4.2]can set default echo = FALSE setup chunk top script.set visibility specific code chunk, put echo = FALSE inside curly brackets.Display table purple italic column headers. Try different styles using kableExtra [section 2.4.5]","code":"\ntasks <- tibble::tribble(\n  ~task,                   ~category,      ~frequency,\n  \"Respond to tweets\",     \"social media\", \"daily\",\n  \"Create a twitter poll\", \"social media\", \"weekly\",\n  \"Make the sales report\", \"reporting\",    \"montly\"\n)\nknitr::opts_chunk$set(echo = FALSE)```{r, echo=FALSE}\n# code to hide```\nkableExtra::kable(tasks) %>%\n  kableExtra::kable_minimal() %>%\n  kableExtra::row_spec(row = 0, italic = TRUE, color = \"purple\")"},{"path":"reports.html","id":"exercises-reports-images","chapter":"2 Reports with R Markdown","heading":"2.7.5 Images","text":"Add image anything relevant [section 2.4.6]can add image web using URL:![Applied Data Skills](https://psyteachr.github.io/ads-v1/images/logos/logo.png)save image project directory (e.g., images folder) add using relative path:![Applied Data Skills](images/logos/logo.png)","code":""},{"path":"reports.html","id":"exercises-reports-inline","chapter":"2 Reports with R Markdown","heading":"2.7.6 Inline R","text":"Use inline R include version R using following sentence: \"report created using R version 4.1.0 (2021-05-18).\" can get version using object R.version.string. [section 2.4.7]report created using `r R.version.string`.","code":""},{"path":"reports.html","id":"exercises-reports-kit","chapter":"2 Reports with R Markdown","heading":"2.7.7 Knit","text":"Knit document html [section 2.4.8]Click knit button run following code console. (put Rmd script!)","code":"\nknitr::knit2html(\"demo.Rmd\")"},{"path":"viz.html","id":"viz","chapter":"3 Basic Data Visualisation","heading":"3 Basic Data Visualisation","text":"","code":""},{"path":"viz.html","id":"ilo-viz","chapter":"3 Basic Data Visualisation","heading":"3.1 Intended Learning Outcomes","text":"Understand difference categorical continuous dataBe able choose appropriate plots dataCreate histograms, bar plots, scatter plots, trend lines, change plot size position code chunk","code":""},{"path":"data.html","id":"data","chapter":"4 Data Import and Relations","heading":"4 Data Import and Relations","text":"","code":""},{"path":"data.html","id":"ilo-data","chapter":"4 Data Import and Relations","heading":"4.1 Intended Learning Outcomes","text":"able import data range sources using rio::import()able identify handle common problems data importBe able match related data multiple tablesYou'll learn following functions chapter:data()rio::inport()readr::read_tsv()readr::read_csv()readxl::read_excel()haven::read_sav()jsonlite::read_json()readr::cols()readr::col_character()readr::col_double()readr::col_logical()readr::col_date()","code":"\nlibrary(tidyverse)\nlibrary(rio)"},{"path":"data.html","id":"data-import","chapter":"4 Data Import and Relations","heading":"4.2 Data Import","text":"lesson, please download directory data files used class.","code":""},{"path":"data.html","id":"builtin","chapter":"4 Data Import and Relations","heading":"4.2.1 Built-in data","text":"R comes built-datasets. packages, like tidyr, also contain data. data() function lists datasets available package.Type name dataset console see data. Type ?table1 console see dataset description.can also use data() function load dataset global environment.","code":"\n# lists datasets in tidyr\ndata(package = \"tidyr\")\n?table1\n# loads table1 into the environment\ndata(\"table1\")"},{"path":"data.html","id":"import_data","chapter":"4 Data Import and Relations","heading":"4.2.2 Importing data","text":"Built-data nice examples, probably interested data. many different types files might work data analysis. different file types usually distinguished three letter extension following period end file name.","code":""},{"path":"data.html","id":"rioimport","chapter":"4 Data Import and Relations","heading":"4.2.2.1 rio::import()","text":"rio package straightforward functions reading saving data: rio::import() rio::export().","code":"\ndemo_tsv  <- import(\"data/demo.tsv\") # tab-separated values\ndemo_csv  <- import(\"data/demo.csv\") # comma-separated values\ndemo_xls  <- import(\"data/demo.xlsx\") # Excel format\ndemo_sav  <- import(\"data/demo.sav\") # SPSS format\ndemo_json <- import(\"data/demo.json\") # JSON format"},{"path":"data.html","id":"file-type-specific-import-functions","chapter":"4 Data Import and Relations","heading":"4.2.2.2 File type specific import functions","text":"However, also useful know specific functions used import different file types tend features deal complicated cases, need skip rows, rename columns, choose Excel sheet use.readr functions display message import data explaining data type column .makes mistake, reading \"date\" column character, can manually set column data types. Just copy \"Column specification\" printed first imported data, make changes need.dates, might need set format. See ?strptime list codes used represent different date formats. , \"%d-%b-%y\" means dates formatted like {day number}-{month abbreviation}-{2-digit year}.","code":"\ndemo_tsv  <- readr::read_tsv(\"data/demo.tsv\")\ndemo_csv  <- readr::read_csv(\"data/demo.csv\")\ndemo_xls <- readxl::read_excel(\"data/demo.xlsx\")\ndemo_sav  <- haven::read_sav(\"data/demo.sav\")\ndemo_json <- jsonlite::read_json(\"data/demo.json\")\ndemo <- readr::read_csv(\"data/demo.csv\")## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   character = col_character(),\n##   integer = col_double(),\n##   double = col_double(),\n##   logical = col_logical(),\n##   date = col_character()\n## )\nct <- cols(\n  character = col_character(),\n  integer = col_double(),\n  double = col_double(),\n  logical = col_logical(),\n  date = col_date(format = \"%d-%b-%y\")\n)\n\ndemo  <- readr::read_csv(\"data/demo.csv\", col_types = ct)"},{"path":"data.html","id":"google-sheets","chapter":"4 Data Import and Relations","heading":"4.2.2.3 Google Sheets","text":"keep data Google Sheets, can access directly R using googlesheets4.","code":"\nlibrary(googlesheets4)\n\ngs4_deauth() # skip authorisation for public data\n\nurl <- \"https://docs.google.com/spreadsheets/d/1yhAPP0hk6fNssL9UdpJ7m_vx00VY5PQKHspx6DNQNSY/\"\n\ndemo_goo  <- googlesheets4::read_sheet(url)"},{"path":"data.html","id":"looking-at-data","chapter":"4 Data Import and Relations","heading":"4.2.3 Looking at data","text":"Now loaded data, look upper right hand window RStudio, Environment tab. see objects listed, along number observations (rows) variables (columns). first check everything went OK.Always, always, always, look data created loaded table. Also look step transforms table. three main ways look table: View(), print(), tibble::glimpse().","code":""},{"path":"data.html","id":"view","chapter":"4 Data Import and Relations","heading":"4.2.3.1 View()","text":"familiar way look table given View() (uppercase 'V'). command can useful console, ever put one script create annoying pop-window user runs . can click objects environment pane open viewer looks bit like Excel. can close tab done looking ; remove object.","code":""},{"path":"data.html","id":"print","chapter":"4 Data Import and Relations","heading":"4.2.3.2 print()","text":"print() method can run explicitly, commonly called just typing variable name blank line. default print entire table, just first 10 rows.look demo_tsv table loaded . Depending wide screen , might need click arrow right table see last column.","code":"\ndemo_tsv"},{"path":"data.html","id":"glimpse","chapter":"4 Data Import and Relations","heading":"4.2.3.3 glimpse()","text":"function tibble::glimpse() gives sideways version table. useful table wide see columns. also tells data type column angled brackets column name. can learn data types Appendix D.","code":"\nglimpse(demo_xls)## Rows: 6\n## Columns: 5\n## $ character <chr> \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"\n## $ integer   <dbl> 1, 2, 3, 4, 5, 6\n## $ double    <dbl> 1.5, 2.5, 3.5, 4.5, 5.5, 6.5\n## $ logical   <lgl> TRUE, TRUE, FALSE, FALSE, NA, TRUE\n## $ date      <chr> \"10-Sep-21\", \"09-Sep-21\", \"08-Sep-21\", \"07-Sep-21\", \"06-Sep-…"},{"path":"data.html","id":"summary-function","chapter":"4 Data Import and Relations","heading":"4.2.3.4 summary()","text":"can get quick summary dataset summary() function.","code":"\nsummary(demo_sav)##   character            integer         double        logical   \n##  Length:6           Min.   :1.00   Min.   :1.50   Min.   :0.0  \n##  Class :character   1st Qu.:2.25   1st Qu.:2.75   1st Qu.:0.0  \n##  Mode  :character   Median :3.50   Median :4.00   Median :1.0  \n##                     Mean   :3.50   Mean   :4.00   Mean   :0.6  \n##                     3rd Qu.:4.75   3rd Qu.:5.25   3rd Qu.:1.0  \n##                     Max.   :6.00   Max.   :6.50   Max.   :1.0  \n##                                                   NA's   :1    \n##      date          \n##  Length:6          \n##  Class :character  \n##  Mode  :character  \n##                    \n##                    \n##                    \n## "},{"path":"data.html","id":"creating-data","chapter":"4 Data Import and Relations","heading":"4.2.4 Creating data","text":"creating small data table scratch, can use tibble::tibble() function, type data right . tibble package part tidyverse package loaded start chapter.create small table names three Avatar characters bending type. tibble() function takes arguments names want columns . values vectors list column values order.know value one cells, can enter NA, Sokka bending ability. values column , can just enter one value copied row.can also use tibble::tribble() function create table row, rather column. start listing column names, preceded tilde (~), list values column, row row, separated commas (forget comma end row).line columns tribble like , can make easier spot errors.","code":"\navatar <- tibble(\n  name = c(\"Katara\", \"Toph\", \"Sokka\"),\n  bends = c(\"water\", \"earth\", NA),\n  friendly = TRUE\n)\n\n# print it\navatar\navatar_by_row <- tribble(\n  ~name,    ~bends,  ~friendly,\n  \"Katara\", \"water\", TRUE,\n  \"Toph\",   \"earth\", TRUE,\n  \"Sokka\",  NA,      TRUE\n)"},{"path":"data.html","id":"writing-data","chapter":"4 Data Import and Relations","heading":"4.2.5 Writing data","text":"data want save CSV file, use rio::export(), follows.save data CSV format working directory.Writing Google Sheets little trickier. Even Google Sheet publicly editable, add data without authorising account.can authorise interactively using following code (email), prompt authorise \"Tidyverse API Packages\" first time .Create new table called family first name, last name, age family members.Save CSV file called \"family.csv\".Clear object environment restarting R code remove(family).Load data back view .working tabular data lot class, tabular data made vectors, groups together data basic data type. Appendix D explains terminology help understand functions learning process analyse data.","code":"\nexport(avatar, \"data/avatar.csv\")\ngs4_auth(email = \"debruine@gmail.com\")\nsheet_id <- gs4_create(\"demo-file\", sheets = demo)\n\nnew_data <- tibble(\n  character = \"Z\",\n  integer = 0L,\n  double = 0.5,\n  logical = FALSE,\n  date = \"01-Jan-00\"\n)\n\nsheet_append(sheet_id, new_data)\ndemo <- read_sheet(sheet_id)\n# create the table\nfamily <- tribble(\n  ~first_name, ~last_name, ~age,\n  \"Lisa\", \"DeBruine\", 45,\n  \"Robbie\", \"Jones\", 14\n)\n\n# save the data to CSV\nexport(family, \"data/family.csv\")\n\n# remove the object from the environment\nremove(family)\n\n# load the data\nfamily <- import(\"data/family.csv\")"},{"path":"data.html","id":"troubleshooting","chapter":"4 Data Import and Relations","heading":"4.2.6 Troubleshooting","text":"import data guesses wrong column type? common reason numeric column non-numbers somewhere. Maybe someone wrote note otherwise numeric column. Columns one data type, characters, whole column converted character strings, numbers like 1.2 get represented \"1.2\", cause weird errors like \"100\" < \"9\" == TRUE. can catch using glimpse() check data.data directory downloaded contains file called \"mess.csv\". try loading dataset.importing goes wrong, often easier fix using specific importing function file type. problems tend specific file format can look help functions easily. CSV files, import function readr::read_csv.get warning many parsing errors mess just single row. View file data/mess.csv clicking File pane, choosing \"View File\". first 10 lines. went wrong?First, file starts note: \"messy dataset\". want skip first two lines. can argument skip read_csv().OK, little better, table still serious mess several ways:junk column needorder integer columngood logical columngood uses kinds different ways record TRUE FALSE valuesmin_max contains two pieces numeric information, character columndate date columnWe'll learn deal mess Chapters 5 6, can fix things setting col_types argument read_csv() specify column types two columns guessed wrong skip \"junk\" column. argument col_types takes list name item list column name value table . can use function, like col_double() abbreviation, like \"l\". Omitted column names guessed.get message \"1 parsing failure\" run . Warnings look scary first, always start reading message. table tells row (2) column (order) error found , kind data expected (integer), actual value (\"missing\"). specifically tell read_csv() import column integer, characters column produce warning like recorded NA. can manually set missing values recorded na argument.Now order integer \"missing\" now NA, good logical value, 0 F converted FALSE 1 T converted TRUE, date date type (adding leading zeros day). learn later chapters fix problems, min_max column containing two different types data.","code":"\nmess <- import(\"data/mess.csv\")## Warning in (function (input = \"\", file = NULL, text = NULL, cmd = NULL, :\n## Stopped early on line 5. Expected 7 fields but found 0. Consider fill=TRUE\n## and comment.char=. First discarded non-empty line: <<junk,missing,0.72,b,1,2 -\n## 3,2020-01-2>>\nmess <- read_csv(\"data/mess.csv\")## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   `This is my messy dataset` = col_character()\n## )## Warning: 27 parsing failures.\n## row col  expected    actual            file\n##   1  -- 1 columns 7 columns 'data/mess.csv'\n##   2  -- 1 columns 7 columns 'data/mess.csv'\n##   3  -- 1 columns 7 columns 'data/mess.csv'\n##   4  -- 1 columns 7 columns 'data/mess.csv'\n##   5  -- 1 columns 7 columns 'data/mess.csv'\n## ... ... ......... ......... ...............\n## See problems(...) for more details.This is my messy dataset\n\njunk,order,score,letter,good,min_max,date\njunk,1,-1,a,1,1 - 2,2020-01-1\n\njunk,missing,0.72,b,1,2 - 3,2020-01-2\n\njunk,3,-0.62,c,FALSE,3 - 4,2020-01-3\n\njunk,4,2.03,d,T,4 - 5,2020-01-4\nmess <- read_csv(\"data/mess.csv\", skip = 2)## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   junk = col_character(),\n##   order = col_character(),\n##   score = col_double(),\n##   letter = col_character(),\n##   good = col_character(),\n##   min_max = col_character(),\n##   date = col_character()\n## )\nmess\n# omitted values are guessed\n# ?col_date for format options\nct <- list(\n  junk = \"-\", # skip this column\n  order = \"i\",\n  good = \"l\",\n  date = col_date(format = \"%Y-%m-%d\")\n)\n\ntidier <- read_csv(\"data/mess.csv\", \n                   skip = 2,\n                   col_types = ct)## Warning: 1 parsing failure.\n## row   col   expected  actual            file\n##   2 order an integer missing 'data/mess.csv'\ntidiest <- read_csv(\"data/mess.csv\", \n                   skip = 2,\n                   na = \"missing\",\n                   col_types = ct)\ntidiest"},{"path":"data.html","id":"data-relations","chapter":"4 Data Import and Relations","heading":"4.3 Data Relations","text":"First, create two small data tables.customer id, gender age customers 1-5. Age gender missing customer 3.orders customer id number items ordered. customers orders, one order, customer table.","code":"\ncustomers <- tibble(\n  id = 1:5,\n  gender = c(\"m\", \"m\", NA, \"nb\", \"f\"),\n  age = c(19, 22, NA, 19, 18)\n)\norders <- tibble(\n  id = c(2, 3, 4, 4, 5, 5, 6, 6, 7),\n  items = c(10, 18, 21, 23, 9, 11, 11, 12, 3)\n)"},{"path":"data.html","id":"mutating-joins","chapter":"4 Data Import and Relations","heading":"4.3.1 Mutating Joins","text":"Mutating joins act like dplyr::mutate() function add new columns one table based values another table.mutating joins basic syntax:****_join(x, y, = NULL, suffix = c(\".x\", \".y\")x = first (left) tabley = second (right) tableby = columns match . leave blank, match columns names two tables.suffix = columns name two tables, joining , get suffix make unambiguous. defaults \".x\" \".y\", can change something meaningful.can leave argument matching columns name, good practice always specify code robust changes loaded data.","code":""},{"path":"data.html","id":"left_join","chapter":"4 Data Import and Relations","heading":"4.3.1.1 left_join()","text":"\nFigure 4.1: Left Join\nleft_join keeps data first (left) table joins anything matches second (right) table. right table one match row right table, one row joined table (see ids 4 5).\nFigure 4.2: Left Join (reversed)\norder tables swapped , result rows orders table joined matching rows customers table.","code":"\nleft_join(customers, orders, by = \"id\")\nleft_join(orders, customers, by = \"id\")"},{"path":"data.html","id":"right_join","chapter":"4 Data Import and Relations","heading":"4.3.1.2 right_join()","text":"\nFigure 4.3: Right Join\nright_join keeps data second (right) table joins anything matches first (left) table.table information left_join(orders, customers, = \"id\"), columns different order (left table, right table).","code":"\nright_join(customers, orders, by = \"id\")"},{"path":"data.html","id":"inner_join","chapter":"4 Data Import and Relations","heading":"4.3.1.3 inner_join()","text":"\nFigure 4.4: Inner Join\ninner_join returns rows match table.","code":"\ninner_join(customers, orders, by = \"id\")"},{"path":"data.html","id":"full_join","chapter":"4 Data Import and Relations","heading":"4.3.1.4 full_join()","text":"\nFigure 4.5: Full Join\nfull_join lets join rows two tables keeping information tables. row match table, table's column values set NA.","code":"\nfull_join(customers, orders, by = \"id\")"},{"path":"data.html","id":"filtering-joins","chapter":"4 Data Import and Relations","heading":"4.3.2 Filtering Joins","text":"Filtering joins act like filter() function remove rows data one table based values another table. result filtering join contain rows left table number fewer rows left table.","code":""},{"path":"data.html","id":"semi_join","chapter":"4 Data Import and Relations","heading":"4.3.2.1 semi_join()","text":"\nFigure 4.6: Semi Join\nsemi_join returns rows left table matching values right table, keeping just columns left table.Unlike inner join, semi join never duplicate rows left table one matching row right table.\nFigure 4.7: Semi Join (Reversed)\nOrder matters semi join.","code":"\nsemi_join(customers, orders, by = \"id\")\nsemi_join(orders, customers, by = \"id\")"},{"path":"data.html","id":"anti_join","chapter":"4 Data Import and Relations","heading":"4.3.2.2 anti_join()","text":"\nFigure 4.8: Anti Join\nanti_join return rows left table matching values right table, keeping just columns left table.\nFigure 4.9: Anti Join (Reversed)\nOrder matters anti join.","code":"\nanti_join(customers, orders, by = \"id\")\nanti_join(orders, customers, by = \"id\")"},{"path":"data.html","id":"binding-joins","chapter":"4 Data Import and Relations","heading":"4.3.3 Binding Joins","text":"Binding joins bind one table another adding rows columns together.","code":""},{"path":"data.html","id":"bind_rows","chapter":"4 Data Import and Relations","heading":"4.3.3.1 bind_rows()","text":"can combine rows two tables bind_rows.add customer data customers 6-9 bind original customer table.columns just names, order. columns differ two tables just NA values entries table.row duplicated two tables (like id 5 ), row also duplicated resulting table. tables exact columns, can use union() (see ) avoid duplicates.","code":"\nnew_customers <- tibble(\n  id = 6:9,\n  gender = c(\"nb\", \"m\", \"f\", \"f\"),\n  age = c(19, 16, 20, 19)\n)\n\nbind_rows(customers, new_customers)\nnew_customers <- tibble(\n  id = 5:9,\n  age = c(18, 19, 16, 20, 19),\n  gender = c(\"f\", \"nb\", \"m\", \"f\", \"f\"),\n  new = c(1,2,3,4,5)\n)\n\nbind_rows(customers, new_customers)"},{"path":"data.html","id":"bind_cols","chapter":"4 Data Import and Relations","heading":"4.3.3.2 bind_cols()","text":"can merge two tables number rows using bind_cols. useful two tables rows exact order. advantage left join tables IDs join rely solely order.","code":"\nnew_info <- tibble(\n  colour = c(\"red\", \"orange\", \"yellow\", \"green\", \"blue\")\n)\n\nbind_cols(customers, new_info)"},{"path":"data.html","id":"set-operations","chapter":"4 Data Import and Relations","heading":"4.3.4 Set Operations","text":"Set operations compare two tables return rows match (intersect), either table (union), one table (setdiff).","code":""},{"path":"data.html","id":"intersect","chapter":"4 Data Import and Relations","heading":"4.3.4.1 intersect()","text":"intersect() returns rows two tables match exactly. columns order.forgotten load dplyr tidyverse, base R also intersect() function. error message can confusing looks something like :","code":"\nnew_customers <- tibble(\n  id = seq(4, 9),\n  age = c(19, 18, 19, 16, 20, 19),\n  gender = c(\"f\", \"f\", \"m\", \"m\", \"f\", \"f\")\n)\n\nintersect(customers, new_customers)\nbase::intersect(customers, new_customers)## Error: Must subset rows with a valid subscript vector.\n## ℹ Logical subscripts must match the size of the indexed input.\n## x Input has size 6 but subscript `!duplicated(x, fromLast = fromLast, ...)` has size 0."},{"path":"data.html","id":"union","chapter":"4 Data Import and Relations","heading":"4.3.4.2 union()","text":"union() returns rows tables, removing duplicate rows.forgotten load dplyr tidyverse, base R also union() function. usually get error message, output expect.","code":"\nunion(customers, new_customers)\nbase::union(customers, new_customers)## [[1]]\n## [1] 1 2 3 4 5\n## \n## [[2]]\n## [1] \"m\"  \"m\"  NA   \"nb\" \"f\" \n## \n## [[3]]\n## [1] 19 22 NA 19 18\n## \n## [[4]]\n## [1] 4 5 6 7 8 9\n## \n## [[5]]\n## [1] 19 18 19 16 20 19\n## \n## [[6]]\n## [1] \"f\" \"f\" \"m\" \"m\" \"f\" \"f\""},{"path":"data.html","id":"setdiff","chapter":"4 Data Import and Relations","heading":"4.3.4.3 setdiff()","text":"setdiff returns rows first table, second table.Order matters setdiff.forgotten load dplyr tidyverse, base R also setdiff() function. usually get error message, output might expect base R setdiff() expects columns order, id 5 registers different two tables.","code":"\nsetdiff(customers, new_customers)\nsetdiff(new_customers, customers)\nbase::setdiff(customers, new_customers)"},{"path":"data.html","id":"glossary-data","chapter":"4 Data Import and Relations","heading":"4.4 Glossary","text":"","code":""},{"path":"data.html","id":"resources-data","chapter":"4 Data Import and Relations","heading":"4.5 Further resources","text":"Data import cheatsheetData transformation heatsheetChapter 11: Data Import R Data ScienceChapter 13: Relational Data R Data Science","code":""},{"path":"data.html","id":"exercises-data","chapter":"4 Data Import and Relations","heading":"4.6 Exercises","text":"","code":""},{"path":"tidy.html","id":"tidy","chapter":"5 Data Tidying","heading":"5 Data Tidying","text":"","code":""},{"path":"tidy.html","id":"ilo-tidy","chapter":"5 Data Tidying","heading":"5.1 Intended Learning Outcomes","text":"able change data long wide formatsSeparate, mutate, reorder, rename columnsUse pipes chain together functionsYou'll learn following functions chapter:`tidyr::pivot_longer()'tidyr::pivot_wider()tidyr::separate()dplyr::select()dplyr::mutate()readr::type_convert()stringr::str_replace_all()tidyr::starts_with()%>%","code":"\nlibrary(tidyverse) # functions from tidyr, dplyr, readr, and pipes\nlibrary(readxl)\nlibrary(stringr)"},{"path":"tidy.html","id":"data-structure","chapter":"5 Data Tidying","heading":"5.2 Data Structure","text":"observation information single \"thing\" single point time. things can customers, sales, orders, feedback questionnaires, tweets, really anything. Observations way identify , unique ID combination variable values.variable one type information observation. example, observation sale, variables might sale sale ID, customer's ID, date sale, price paid, method payment.value data one variable one observation. example, value date variable observation sale might 2021-08-20.three rules \"tidy data\", data format makes easier combine data different tables, create summary tables, visualise data.observation must rowEach variable must columnEach value must cell","code":""},{"path":"tidy.html","id":"untidy-data","chapter":"5 Data Tidying","heading":"5.2.1 Untidy data","text":"table three observations per row (one customer's orders 2018, 2019, 2020) itemsprice_{year} columns contain two values (number items price per item).\nTable 5.1: Untidy table\nsay wanted calculate total price per customer three years total number items bought per customer. perform mathematical operations itemsprice_{year} columns character data types.probably normally use Excel tosplit itemsprice_2018 columns item_2018 price_2018 columnssplit itemsprice_2019 columns item_2019 price_2019 columnssplit itemsprice_2020 columns item_2018 price_2020 columnsadd item_2018 + item_2019 + item_2020 get total number items bought per customeradd totalprice_2018 + totalprice_2019 + totalprice_2020 get total price per customerThink many steps Excel 10 years table, different number years time encountered data like .","code":""},{"path":"tidy.html","id":"tidy-data","chapter":"5 Data Tidying","heading":"5.2.2 Tidy data","text":"tidy version, row customer's orders particular year. number items (items) price per item (price_per_item) separate columns, now can perform mathematical operations .\nTable 5.1: Tidy table\ncalculate total price per customer three years total number items bought per customer R, need :group table customer_idsum items column get total number items bought per customersum totalprice column get total price per customerIf 10 years table, different number years time encountered data like , code producing table never changes.control data recorded, make life easier record tidy format start. However, always control, class also teach convert untidy table tidy tables.","code":"\ntidy_data <- read_csv(\"data/tidy_data.csv\")\n\n# we'll learn about these functions later\ntidy_data %>%\n  group_by(customer_id) %>%\n  summarise(\n    total_items = sum(items),\n    total_price = sum(totalprice)\n  )"},{"path":"tidy.html","id":"reshaping-data","chapter":"5 Data Tidying","heading":"5.3 Reshaping Data","text":"Data tables can wide format long format (mix two). Wide data observations one thing row, long data observation separate row. often need convert formats different types summaries visualisation.look just totalprice data untidy table . can select just columns want using dplyr::select() function. function's first argument data table want select , argument either name column table, new_name = old_name. useful function changing column names order columns, well selecting subset columns.\nTable 5.2: Wide data\nwide format, row customer, represents data several years. really intuitive way humans read table, easy computer process .data can represented long format creating new column specifies item observation new column specifies value observation. easier use make summaries plots.\nTable 5.3: Long data\nCreate long version following table. need use code, just sketch notebook make table spreadsheet.answer need column headers order.pivot functions allow transform data table wide long long wide.","code":"\n# select just the customer ID and 3 total price columns\nuntidy_price <- select(\n  .data = untidy_data,\n  customer_id, \n  `2018` = totalprice_2018,\n  `2019` = totalprice_2019,\n  `2020` = totalprice_2020\n)"},{"path":"tidy.html","id":"wide-to-long","chapter":"5 Data Tidying","heading":"5.3.0.1 Wide to long","text":"function pivot_longer() converts wide data table longer format converting headers specified columns values new columns, combining values columns new condensed column.function several arguments:cols: columns want make long; can refer names, like c(`2018`, `2019`, `2020`) `2018`:`2020` numbers, like c(2, 3, 4) 2:4names_to: want call new columns cols column header names go intovalues_to: want call new column contains values cols\nTable 5.4: Data made longer pivot_longer()\n","code":"\nuntidy_price_long <- pivot_longer(\n  data = untidy_price, \n  cols = `2018`:`2020`, # columns to make long \n  names_to = \"year\", # new column name for headers\n  values_to = \"totalprice\" # new column name for values\n)"},{"path":"tidy.html","id":"long-to-wide","chapter":"5 Data Tidying","heading":"5.3.0.2 Long to wide","text":"can also go long wide format using pivot_wider() function.names_from: columns contain new column headers.values_from: column contains values new columns.names_sep:character string used join names names_from one column.\nTable 5.5: Data made wider pivot_wider()\n","code":"\nuntidy_price_wide <- pivot_wider(\n  data = untidy_price_long,\n  names_from = year,\n  values_from = totalprice\n)"},{"path":"tidy.html","id":"multi-step-tidying","chapter":"5 Data Tidying","heading":"5.4 Multi-step tidying","text":"often need go wide, long, intermediate shape order get data format useful plotting, column variable want represent aesthetic.full untidy_data table seven columns: customer ID, three columns itemsprice 3 columns totalprice.want get tidy format row observation one customer per year, columns customer_id, year, item, price_per_item totalprice.","code":""},{"path":"tidy.html","id":"one-observation-per-row","chapter":"5 Data Tidying","heading":"5.4.1 One observation per row","text":"original table observations customer three years. many observations per row, first start making table long. need make 6 rows customer, one variable-year combo, columns customer ID, year, variable, value.combining columns numeric character data type, need make new value column character data type using values_transform, since numbers can represented characters (like \"3.5\"), character strings represented numbers.\nTable 5.6: Untidy data converted wide long.\n","code":"\nlonger_data <- pivot_longer(\n  data = untidy_data, \n  cols = itemsprice_2018:totalprice_2020, # columns to make long \n  names_to = c(\"category\", \"year\"),       # new column names for cols\n  names_sep = \"_\",                        # how to split cols into new columns\n  # names_pattern = \"(.*)_(.*)\", # alternative to names_sep\n  values_to = \"value\", # new column name for values\n  \n  # make sure new columns are the right data type\n  names_transform = list(year = as.integer),\n  values_transform = list(value = as.character) \n)"},{"path":"tidy.html","id":"one-variable-per-column","chapter":"5 Data Tidying","heading":"5.4.2 One variable per column","text":"Now value column contains data two different variables. need make table wider, wide . want keep year column make new columns called itemsprice totalprice relevant customer's value variable year.\nTable 2.1: Data converted long intermediate shape.\n","code":"\nwider_data <- pivot_wider(\n  data = longer_data,\n  id_cols = c(customer_id, year),\n  names_from = category,\n  values_from = value\n)"},{"path":"tidy.html","id":"one-value-per-cell","chapter":"5 Data Tidying","heading":"5.4.3 One value per cell","text":"cells itemsprice column actually contain two different values. need split two columns variables items, price_per_item. can split column parts function tidyr::separate().\nTable 5.7: itemsprice column split items price_per_item using separate()\nnew columns different data type old column, set convert = TRUE automatically fix . common columns contain multiple numbers, separated commas semicolons. character types separated, numeric types can mathematical operations like sum .","code":"\nsplit_data <- separate(\n  data = wider_data, \n  col = itemsprice, # the column to split\n  into = c(\"items\", \"price_per_item\"), # the new columns to create\n  sep = \" \", # how to split col\n  remove = TRUE, # whether to remove to old col\n  convert = TRUE # whether to fix the data type of the new columns\n)"},{"path":"tidy.html","id":"altering-data","chapter":"5 Data Tidying","heading":"5.4.4 Altering data","text":"column price_per_item still character column parentheses. ways fix . can use dplyr::mutate() function change column add new one., use stringr::str_replace_all() replace \"(\" \")\" \"\".\nTable 5.8: Mutating data remove parentheses price_per_item.\n","code":"\nmutated_data <- mutate(\n  .data = split_data,\n  price_per_item = stringr::str_replace_all(\n    string = price_per_item, \n    pattern = \"[()]\", \n    replacement = \"\"\n  )\n)"},{"path":"tidy.html","id":"fixing-data-types","chapter":"5 Data Tidying","heading":"5.4.5 Fixing data types","text":"price_per_item totalprice columns still characters, things like calculate sum totalprice.data clean tidy, can fix column data types one step using readr::type_convert(). good practice finished cleaning data set. automatic type detection work expected, usually means still non-numeric characters column supposed numbers. can also manually set column types way readr::read_csv()","code":"\n# check the data types\nglimpse(mutated_data)## Rows: 15\n## Columns: 5\n## $ customer_id    <int> 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5\n## $ year           <int> 2018, 2019, 2020, 2018, 2019, 2020, 2018, 2019, 2020, 2…\n## $ items          <int> 2, 8, 10, 1, 6, 1, 4, 5, 5, 10, 1, 3, 3, 9, 8\n## $ price_per_item <chr> \"3.91\", \"4.72\", \"5.59\", \"3.91\", \"4.72\", \"5.59\", \"3.91\",…\n## $ totalprice     <chr> \"7.82\", \"37.76\", \"55.9\", \"3.91\", \"28.32\", \"5.59\", \"15.6…\ntidy_data <- type_convert(\n  df = mutated_data,\n  trim_ws = TRUE, # removes spaces before and after values\n)\n\n# check the data types\nglimpse(tidy_data)## Rows: 15\n## Columns: 5\n## $ customer_id    <int> 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5\n## $ year           <int> 2018, 2019, 2020, 2018, 2019, 2020, 2018, 2019, 2020, 2…\n## $ items          <int> 2, 8, 10, 1, 6, 1, 4, 5, 5, 10, 1, 3, 3, 9, 8\n## $ price_per_item <dbl> 3.91, 4.72, 5.59, 3.91, 4.72, 5.59, 3.91, 4.72, 5.59, 3…\n## $ totalprice     <dbl> 7.82, 37.76, 55.90, 3.91, 28.32, 5.59, 15.64, 23.60, 27…"},{"path":"tidy.html","id":"pipes","chapter":"5 Data Tidying","heading":"5.5 Pipes","text":"Pipes way order code readable format.can always create new object every step use object next step, like . pretty clear, created several unnecessary data objects environment. can get confusing long scripts.can name object data keep replacing old data object new one step. keep environment clean, recommend makes easy accidentally run code order running line--line development debugging.One way avoid extra objects nest functions, literally replacing data object code generated previous step. can fine short chains.gets extremely confusing long chains:pipe lets \"pipe\" result function next function, allowing put code logical order without creating many extra objects. default, result previous function becomes first argument next function. tidyverse functions take data table first argument, pipe together easily.example, instead making table called untidy_data reading csv file, making new table called totalprice_data selecting customer_id totalprice_{year} columns untidy_data...... can just make one table called totalprice_data reading csv file piping resulting table select() function.Notice longer need specify .data argument. Add back see happens. common error converting code using separate variables using pipeline, learn identify quickly.longer series steps like one , using pipes can eliminate many intermediate objects. also makes easier add intermediate step process without think new table name edit table input next step.can read code like :Read data (read_csv())\nfile: file r path(\"data/untidy_data.csv\")`; \nfile: file r path(\"data/untidy_data.csv\")`; thenReshape data longer (pivot_longer())\ncols: take columns itemsprice_2018 totalprice_2020,\nnames_to: create new columns called \"category\" \"year\" cols header names,\nnames_sep: separate column names using \"_\"\nvalues_to: create new column called \"value\" cols values,\nnames_transform = transform year column integers,\nvalues_transform = transform value column characters; \ncols: take columns itemsprice_2018 totalprice_2020,names_to: create new columns called \"category\" \"year\" cols header names,names_sep: separate column names using \"_\"values_to: create new column called \"value\" cols values,names_transform = transform year column integers,values_transform = transform value column characters; thenReshape data wider (pivot_wider())\nid_cols: row observation unique customer_id year,\nnames_from: get new column names values category column,\nvalues_from: get new column values values value column; \nid_cols: row observation unique customer_id year,names_from: get new column names values category column,values_from: get new column values values value column; thenSplit multiple values column (separate())\ncol: separate column itemsprice,\n: new columns called \"items\" \"price_per_item\",\nsep: separate values \" \",\nremove: remove old column,\nconvert: convert new columns right data types; \ncol: separate column itemsprice,: new columns called \"items\" \"price_per_item\",sep: separate values \" \",remove: remove old column,convert: convert new columns right data types; thenChange column (mutate())\nprice_per_item: replace existing column price_per_item result search replace:\nstring: strings modify come price_per_item columns,\npattern: search left right parentheses,\nreplacement: replace \"\"; ,\n\nprice_per_item: replace existing column price_per_item result search replace:\nstring: strings modify come price_per_item columns,\npattern: search left right parentheses,\nreplacement: replace \"\"; ,\nstring: strings modify come price_per_item columns,pattern: search left right parentheses,replacement: replace \"\"; ,Fix data types (type_convert())\ntrim_ws: remove spaces, tabs, line breaks start end value\ntrim_ws: remove spaces, tabs, line breaks start end valueDon't feel like always need get data wrangling code single pipeline. make intermediate objects whenever need break code getting complicated need debug something.can debug pipe highlighting beginning just pipe want stop . Try highlighting data <- end separate function typing cmd-return. data look like now?","code":"\nuntidy_data <- read_csv(file = \"data/untidy_data.csv\")## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   customer_id = col_double(),\n##   itemsprice_2018 = col_character(),\n##   itemsprice_2019 = col_character(),\n##   itemsprice_2020 = col_character(),\n##   totalprice_2018 = col_double(),\n##   totalprice_2019 = col_double(),\n##   totalprice_2020 = col_double()\n## )\nlonger_data <- pivot_longer(\n  data = untidy_data,\n  cols = itemsprice_2018:totalprice_2020,\n  names_to = c(\"category\", \"year\"),\n  names_sep = \"_\", \n  values_to = \"value\", \n  names_transform = list(year = as.integer),\n  values_transform = list(value = as.character) \n) \n\nwider_data <- pivot_wider(\n  data = longer_data,\n  id_cols = c(customer_id, year),\n  names_from = category,\n  values_from = value\n)\n\nsplit_data <- separate(\n  data = wider_data,\n  col = itemsprice,\n  into = c(\"items\", \"price_per_item\"),\n  sep = \" \", \n  remove = TRUE, \n  convert = TRUE\n) \n\nmutated_data <- mutate(\n  .data = split_data,\n  price_per_item = stringr::str_replace_all(\n    string = price_per_item, \n    pattern = \"[()]\", \n    replacement = \"\"\n  )\n) \n\ntidy_data <- type_convert(\n  df = mutated_data,\n  trim_ws = TRUE,\n)## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   price_per_item = col_double(),\n##   totalprice = col_double()\n## )\nmean_total_price <- round(mean(tidy_data$totalprice), 2)\n# do not ever do this!!!!!!\ntidy_data <- type_convert(\n  df = mutate(\n    .data = separate(\n      data = pivot_wider(\n        data = pivot_longer(\n          data = read_csv(file = \"data/untidy_data.csv\"),\n          cols = itemsprice_2018:totalprice_2020,\n          names_to = c(\"category\", \"year\"),\n          names_sep = \"_\",\n          values_to = \"value\",\n          names_transform = list(year = as.integer),\n          values_transform = list(value = as.character)\n        ) ,\n        id_cols = c(customer_id, year),\n        names_from = category,\n        values_from = value\n      ),\n      col = itemsprice,\n      into = c(\"items\", \"price_per_item\"),\n      sep = \" \",\n      remove = TRUE,\n      convert = TRUE\n    ) ,\n    price_per_item = stringr::str_replace_all(\n      string = price_per_item,\n      pattern = \"[()]\",\n      replacement = \"\"\n    )\n  ),\n  trim_ws = TRUE,\n)\nuntidy_data <- read_csv(file = \"data/untidy_data.csv\")\n\ntotalprice_data <- select(\n  .data = untidy_data,\n  customer_id, \n  starts_with(\"totalprice\") # selects all columns that start with a string\n)\ntotalprice_data <- read_csv(file = \"data/untidy_data.csv\") %>%\n  select(\n    customer_id, \n    starts_with(\"totalprice\") \n  )## \n## ── Column specification ────────────────────────────────────────────────────────\n## cols(\n##   customer_id = col_double(),\n##   itemsprice_2018 = col_character(),\n##   itemsprice_2019 = col_character(),\n##   itemsprice_2020 = col_character(),\n##   totalprice_2018 = col_double(),\n##   totalprice_2019 = col_double(),\n##   totalprice_2020 = col_double()\n## )\ntidy_data <- read_csv(file = \"data/untidy_data.csv\") %>%\n  pivot_longer(\n    cols = itemsprice_2018:totalprice_2020,\n    names_to = c(\"category\", \"year\"),\n    names_sep = \"_\", \n    values_to = \"value\", \n    names_transform = list(year = as.integer),\n    values_transform = list(value = as.character) \n  ) %>%\n  pivot_wider(\n    id_cols = c(customer_id, year),\n    names_from = category,\n    values_from = value\n  ) %>%\n  separate(\n    col = itemsprice,\n    into = c(\"items\", \"price_per_item\"),\n    sep = \" \", \n    remove = TRUE, \n    convert = TRUE\n  ) %>%\n  mutate(\n    price_per_item = stringr::str_replace_all(\n      string = price_per_item, \n      pattern = \"[()]\", \n      replacement = \"\"\n    )\n  ) %>%\n  type_convert(\n    trim_ws = TRUE,\n  )"},{"path":"tidy.html","id":"glossary-tidy","chapter":"5 Data Tidying","heading":"5.6 Glossary","text":"","code":""},{"path":"tidy.html","id":"resources-tidy","chapter":"5 Data Tidying","heading":"5.7 Further resources","text":"","code":""},{"path":"tidy.html","id":"exercises-tidy","chapter":"5 Data Tidying","heading":"5.8 Exercises","text":"say small Excel table 10 customer IDs, many widgets gadgets purchased 2020 2021.want calculate total number items purchased per year make table sorted total number items purchased.","code":""},{"path":"tidy.html","id":"load-the-data","chapter":"5 Data Tidying","heading":"5.8.1 Load the data","text":"data file (widgets_gadgets.xlsx) multiple header columns, need skip rows import data set column names: customer_id, widgets_2020,widgets_2021, gadgets_2020andgadgets_2021`.","code":"\n# get the data with better column names\ndata_original <- readxl::read_excel(\n  path = \"data/widgets_gadgets.xlsx\",\n  skip = 2,\n  col_names = c(\n    \"customer_id\",\n    \"widgets_2020\",\n    \"widgets_2021\",\n    \"gadgets_2020\",\n    \"gadgets_2021\"\n  )\n)"},{"path":"tidy.html","id":"reshape-the-data-longer","chapter":"5 Data Tidying","heading":"5.8.2 Reshape the data longer","text":"data wide format, customer's number widgets gadgets across two years row. Convert data shape row one customer's order one item type one year. table 40 rows combination 10 customers times 2 item types times 2 years, 4 columns: custmer_id, item, year, number.","code":"\ndata_longer <- pivot_longer(\n  data = data_original,\n  cols = 2:5,\n  names_to = c(\"item\", \"year\"),\n  names_sep = \"_\",\n  values_to = \"number\"\n)"},{"path":"tidy.html","id":"reshape-the-data-wider","chapter":"5 Data Tidying","heading":"5.8.3 Reshape the data wider","text":"Convert data shape row one customer's order widgets gadgets one year. table 20 rows combination 10 customers times 2 years, 4 columns: custmer_id, year, widgets gadgets.","code":"\ndata_wider <- pivot_wider(\n  data = data_longer,\n  id_cols = c(customer_id, year),\n  names_from = item,\n  values_from = number\n)"},{"path":"tidy.html","id":"rename-and-reorder","chapter":"5 Data Tidying","heading":"5.8.4 Rename and reorder","text":"Change order columns names column headers Year, Customer ID,Gadgets, andWidgets` .","code":"\n# column names with special characters have to be inside backticks\n# you can put all column names inside backticks if you want\ndata <- select(\n  .data = data_wider,\n  Year = year,\n  `Customer ID` = customer_id,\n  Gadgets = gadgets,\n  Widgets = widgets\n)"},{"path":"tidy.html","id":"put-in-a-pipeline","chapter":"5 Data Tidying","heading":"5.8.5 Put in a pipeline","text":"Put four steps single pipeline. Practice reading code top bottom.","code":"\ndata <- readxl::read_excel(\n  path = \"data/widgets_gadgets.xlsx\",\n  skip = 2,\n  col_names = c(\n    \"customer_id\",\n    \"widgets_2020\",\n    \"widgets_2021\",\n    \"gadgets_2020\",\n    \"gadgets_2021\"\n  )\n) %>%\n  pivot_longer(\n    cols = 2:5,\n    names_to = c(\"item\", \"year\"),\n    names_sep = \"_\",\n    values_to = \"number\"\n  ) %>%\n  pivot_wider(\n    id_cols = c(customer_id, year),\n    names_from = item,\n    values_from = number\n  ) %>%\n  select(\n    Year = year,\n    `Customer ID` = customer_id,\n    Gadgets = gadgets,\n    Widgets = widgets\n  )"},{"path":"wrangle.html","id":"wrangle","chapter":"6 Data Wrangling","heading":"6 Data Wrangling","text":"","code":""},{"path":"wrangle.html","id":"ilo-wrangle","chapter":"6 Data Wrangling","heading":"6.1 Intended Learning Outcomes","text":"able select filter data relevanceBe able calculate row means","code":""},{"path":"summary.html","id":"summary","chapter":"7 Data Summaries","heading":"7 Data Summaries","text":"","code":""},{"path":"summary.html","id":"ilo-summary","chapter":"7 Data Summaries","heading":"7.1 Intended Learning Outcomes","text":"Summarise data groupsProduce well-formatted tables","code":""},{"path":"custom.html","id":"custom","chapter":"8 Customising Visualisations","heading":"8 Customising Visualisations","text":"","code":""},{"path":"custom.html","id":"ilo-custom","chapter":"8 Customising Visualisations","heading":"8.1 Intended Learning Outcomes","text":"Customise plots consistent styleCreate high quality plots like BBC, NYT, 538","code":"\nlibrary(tidyverse)\nlibrary(ggwordcloud) # for word clouds\nlibrary(tidytext) # for manipulating text for word clouds\nlibrary(patchwork) # for combining plots"},{"path":"custom.html","id":"word-clouds","chapter":"8 Customising Visualisations","heading":"8.2 Word Clouds","text":"Next, need make table number times individual word appears per rating function tidytext::unnest_tokens() splitting words input column individual words new output column.can get rid common \"stop words\" integers filtering words omitted list.group rating use dplyr::slice_max() get top 25 words, ordered column n.Now can make two word clouds paste together (word clouds play well facets). filter words table get one rating, set ggplot aesthetics label, colour, size. label come word column, colour different word size word proportional n, number times word appeared.visualisation use ggwordcloud::geom_text_wordcloud_area(). can control big cloud ggwordcloud::scale_size_area() (usually takes trial--error). add title minimal theme get rid axes grid lines.Make another plot different rating paste together +.","code":"\n# https://www.kaggle.com/sid321axn/amazon-alexa-reviews\n# extracted from Amazon by Manu Siddhartha & Anurag Bhatt\nalexa <- rio::import(\"data/amazon_alexa.csv\")\nomitted <- c(stop_words$word, 0:9)\n\nwords <- alexa %>%\n  unnest_tokens(output = \"word\", input = \"verified_reviews\") %>%\n  count(word, rating) %>%\n  filter(!word %in% omitted) %>%\n  group_by(rating) %>%\n  slice_max(order_by = n, n = 25, with_ties = FALSE)\nrating1 <- filter(words, rating == 1) %>%\n  ggplot(aes(label = word, colour = word, size = n)) +\n  geom_text_wordcloud_area() +\n  scale_size_area(max_size = 10) +\n  ggtitle(\"Rating = 1\") +\n  theme_minimal(base_size = 14)\nrating5 <- filter(words, rating == 5) %>%\n  ggplot(aes(label = word, colour = word, size = n)) +\n  geom_text_wordcloud_area() +\n  scale_size_area(max_size = 10) +\n  ggtitle(\"Rating = 5\") +\n  theme_minimal(base_size = 14)\n\nrating1 + rating5"},{"path":"present.html","id":"present","chapter":"9 Dashboards, Reports, and Presentations","heading":"9 Dashboards, Reports, and Presentations","text":"","code":""},{"path":"present.html","id":"ilo-present","chapter":"9 Dashboards, Reports, and Presentations","heading":"9.1 Intended Learning Outcomes","text":"Structure data report, dashboard, presentation formatsInclude table contents, figure table captions, references longer reports","code":""},{"path":"present.html","id":"resources-present","chapter":"9 Dashboards, Reports, and Presentations","heading":"9.2 Resources","text":"RStudio Formats","code":""},{"path":"next.html","id":"next","chapter":"10 What's Next","heading":"10 What's Next","text":"","code":""},{"path":"next.html","id":"ilo-next","chapter":"10 What's Next","heading":"10.1 Intended Learning Outcomes","text":"familiar range applications using RIdentify appropriate sources continued learning","code":""},{"path":"installing-r.html","id":"installing-r","chapter":"A Installing R","heading":"A Installing R","text":"Installing R RStudio usually straightforward. sections explain helpful YouTube video .","code":""},{"path":"installing-r.html","id":"installing-base-r","chapter":"A Installing R","heading":"A.1 Installing Base R","text":"Install base R. Choose download link operating system (Linux, Mac OS X, Windows).Mac, install latest release newest R-x.x.x.pkg link (legacy version older operating system). install R, also install XQuartz able use visualisation packages.installing Windows version, choose \"base\" subdirectory click download link top page. install R, also install RTools; use \"recommended\" version highlighted near top list.using Linux, choose specific operating system follow installation instructions.","code":""},{"path":"installing-r.html","id":"installing-rstudio","chapter":"A Installing R","heading":"A.2 Installing RStudio","text":"Go rstudio.com download RStudio Desktop (Open Source License) version operating system list titled Installers Supported Platforms.","code":""},{"path":"installing-r.html","id":"rstudio-settings","chapter":"A Installing R","heading":"A.3 RStudio Settings","text":"settings fix immediately updating RStudio. Go Global Options... Tools menu (⌘,), General tab, uncheck box says Restore .RData workspace startup. keep things around workspace, things get messy, unexpected things happen. always start clear workspace. also means never want save workspace exit, set Never. thing want save scripts.may also want change appearance code. Different fonts themes can sometimes help visual difficulties dyslexia.\nFigure .1: RStudio General Appearance settings\nmay also want change settings Code tab. Foe example, Lisa prefers two spaces instead tabs code likes able see whitespace characters. matter personal preference.\nFigure .2: RStudio Code settings\n","code":""},{"path":"installing-r.html","id":"installing-latex","chapter":"A Installing R","heading":"A.4 Installing LaTeX","text":"can install LaTeX typesetting system produce PDF reports RStudio. Without additional installation, able produce reports HTML PDF. course require make PDFs. generate PDF reports, additionally need install tinytex (Xie, 2021) run following code:","code":"\ntinytex::install_tinytex()"},{"path":"symbols.html","id":"symbols","chapter":"B Symbols","heading":"B Symbols","text":"\nFigure B.1: Image James Chapman/Soundimals\n","code":""},{"path":"conventions.html","id":"conventions","chapter":"C Conventions","heading":"C Conventions","text":"book use following conventions:Generic code: list(number = 1, letter = \"\")Generic code: list(number = 1, letter = \"\")Highlighted code: list(number = 1, letter = \"\")Highlighted code: list(number = 1, letter = \"\")File paths: data/sales.csvFile paths: data/sales.csvR Packages: tidyverseR Packages: tidyverseFunctions: paste()Functions: paste()Strings: \"Lisa\", \"Emily\"Strings: \"Lisa\", \"Emily\"Numbers: 100, 3.14Numbers: 100, 3.14Logical values: TRUE, FALSELogical values: TRUE, FALSEGlossary items: ordinalGlossary items: ordinalCitations: Wickham (2021)Citations: Wickham (2021)Internal links: Chapter 3Internal links: Chapter 3External links: Mastering ShinyExternal links: Mastering ShinyMenu/interface options: New File...Menu/interface options: New File...Quiz question: going learn lot: TRUEFALSEQuiz question: going learn lot: TRUEFALSEWhat p-value?\n\nprobability null hypothesis truethe probability observed, extreme, data, assumption null-hypothesis truethe probability making error conclusion\np-value?found !Informational asides.Notes warn something.Notes things cause serious errors.Try .","code":"\n# code chunks\npaste(\"Applied\", \"Data\", \"Skills\", 1, sep = \" \")## [1] \"Applied Data Skills 1\""},{"path":"data-types.html","id":"data-types","chapter":"D Data Types","heading":"D Data Types","text":"","code":""},{"path":"data-types.html","id":"basic-data-types","chapter":"D Data Types","heading":"D.1 Basic data types","text":"Data can numbers, words, true/false values combinations . order understand later concepts, useful basic understanding data types R: numeric, character, logical, well special classes factor date/times.","code":""},{"path":"data-types.html","id":"numeric-data","chapter":"D Data Types","heading":"D.1.1 Numeric data","text":"numbers numeric data types. two types numeric data, integer double. Integers whole numbers, like -1, 0 1. Doubles numbers can fractional amounts. just type plain number 10, stored double, even decimal point. want exact integer, can use L suffix (10L), distinction make much difference practice.ever want know data type something, use typeof function.want know something numeric (double integer), can use function .numeric() tell numeric (TRUE) (FALSE).","code":"\ntypeof(10)   # double\ntypeof(10.0) # double\ntypeof(10L)  # integer\ntypeof(10i)  # complex## [1] \"double\"\n## [1] \"double\"\n## [1] \"integer\"\n## [1] \"complex\"\nis.numeric(10L)\nis.numeric(10.0)\nis.numeric(\"Not a number\")## [1] TRUE\n## [1] TRUE\n## [1] FALSE"},{"path":"data-types.html","id":"character-data","chapter":"D Data Types","heading":"D.1.2 Character data","text":"Characters (also called \"strings\") text quotation marks.can include quotes, escape quotes using backslash signal quote meant end string.","code":"\ntypeof(\"This is a character string\")\ntypeof('You can use double or single quotes')## [1] \"character\"\n## [1] \"character\"\nmy_string <- \"The instructor said, \\\"R is cool,\\\" and the class agreed.\"\ncat(my_string) # cat() prints the arguments## The instructor said, \"R is cool,\" and the class agreed."},{"path":"data-types.html","id":"logical-data","chapter":"D Data Types","heading":"D.1.3 Logical Data","text":"Logical data (also sometimes called \"boolean\" values) one two values: true false. R, always write uppercase: TRUE FALSE.compare two values operator, checking see 10 greater 5, resulting value logical.might also see logical values abbreviated T F, 0 1. can cause problems road, always spell whole thing.","code":"\nclass(TRUE)\nclass(FALSE)## [1] \"logical\"\n## [1] \"logical\"\nis.logical(10 > 5)## [1] TRUE"},{"path":"data-types.html","id":"factors","chapter":"D Data Types","heading":"D.1.4 Factors","text":"factor specific type integer lets specify categories order. useful data tables make plots display categories correct order.Factors type integer, can tell factors checking class().","code":"\nmyfactor <- factor(\"B\", levels = c(\"A\", \"B\",\"C\"))\nmyfactor## [1] B\n## Levels: A B C\ntypeof(myfactor)\nclass(myfactor)## [1] \"integer\"\n## [1] \"factor\""},{"path":"data-types.html","id":"dates-and-times","chapter":"D Data Types","heading":"D.1.5 Dates and Times","text":"Dates times represented doubles special classes. Dates times hard work , lubridate package provides functions help .Date datetimes type double, can tell dates checking class(). Datetimes can one classes start POSIX.data types :100 integerdoublecharacterlogicalfactor100L integerdoublecharacterlogicalfactor\"100\" integerdoublecharacterlogicalfactor100.0 integerdoublecharacterlogicalfactor-100L integerdoublecharacterlogicalfactorfactor(100) integerdoublecharacterlogicalfactorTRUE integerdoublecharacterlogicalfactor\"TRUE\" integerdoublecharacterlogicalfactorFALSE integerdoublecharacterlogicalfactor1 == 2 integerdoublecharacterlogicalfactor","code":"\ntoday <- lubridate::today()\nnow <- lubridate::now(tzone = \"GMT\")\ntypeof(today)\ntypeof(now)\nclass(today)\nclass(now)## [1] \"double\"\n## [1] \"double\"\n## [1] \"Date\"\n## [1] \"POSIXct\" \"POSIXt\""},{"path":"data-types.html","id":"containers","chapter":"D Data Types","heading":"D.2 Basic container types","text":"Individual data values can grouped together containers. main types containers work vectors, lists, data tables.","code":""},{"path":"data-types.html","id":"vectors","chapter":"D Data Types","heading":"D.2.1 Vectors","text":"vector R set items ('elements') specific order. elements vector must data type (numeric, character, logical). can create vector enclosing elements function c().happens mix types? class variable mixed?mix data types vector; elements vector must data type. mix , R \"coerce\" . mix doubles integers, integers changed doubles. mix characters numeric types, numbers coerced characters, 10 turn \"10\".","code":"\n## put information into a vector using c(...)\nc(1, 2, 3, 4)\nc(\"this\", \"is\", \"cool\")\n1:6 # shortcut to make a vector of all integers x:y## [1] 1 2 3 4\n## [1] \"this\" \"is\"   \"cool\"\n## [1] 1 2 3 4 5 6\nmixed <- c(2, \"good\", 2L, \"b\", TRUE)\ntypeof(mixed)## [1] \"character\""},{"path":"data-types.html","id":"selecting-values-from-a-vector","chapter":"D Data Types","heading":"D.2.1.1 Selecting values from a vector","text":"wanted pick specific values vector position, can use square brackets (extract operator, []) vector.can select one value vector putting vector numbers inside square brackets. example, can select 18th, 19th, 20th, 21st, 4th, 9th 15th letter built-vector LETTERS (gives uppercase letters Latin alphabet).Can decode secret message?can also create 'named' vectors, element name. example:can access elements name using character vector within square brackets. can put order want, can repeat elements:can get vector names using names() function, can set change using something like names(vec2) <- c(\"n1\", \"n2\", \"n3\").Another way access elements using logical vector within square brackets. pull elements vector corresponding element logical vector TRUE. logical vector length original, repeat. can find long vector using length() function.","code":"\nvalues <- c(10, 20, 30, 40, 50)\nvalues[2] # selects the second value## [1] 20\nword <- c(18, 19, 20, 21, 4, 9, 15)\nLETTERS[word]## [1] \"R\" \"S\" \"T\" \"U\" \"D\" \"I\" \"O\"\nsecret <- c(14, 5, 22, 5, 18, 7, 15, 14, 14, 1, 7, 9, 22, 5, 25, 15, 21, 21, 16)\nLETTERS[secret]##  [1] \"N\" \"E\" \"V\" \"E\" \"R\" \"G\" \"O\" \"N\" \"N\" \"A\" \"G\" \"I\" \"V\" \"E\" \"Y\" \"O\" \"U\" \"U\" \"P\"\nvec <- c(first = 77.9, second = -13.2, third = 100.1)\nvec##  first second  third \n##   77.9  -13.2  100.1\nvec[c(\"third\", \"second\", \"second\")]##  third second second \n##  100.1  -13.2  -13.2\nlength(LETTERS)\nLETTERS[c(TRUE, FALSE)]## [1] 26\n##  [1] \"A\" \"C\" \"E\" \"G\" \"I\" \"K\" \"M\" \"O\" \"Q\" \"S\" \"U\" \"W\" \"Y\""},{"path":"data-types.html","id":"rep_seq","chapter":"D Data Types","heading":"D.2.1.2 Repeating Sequences","text":"useful tricks save typing creating vectors.command x:y : operator give sequence number starting x, going y increments 1.want create sequence something integer steps? can use seq() function. Look examples work arguments .want repeat vector many times? either type (painful) use rep() function, can repeat vectors different ways.rep() function useful create vector logical values (TRUE/FALSE 1/0) select values another vector.","code":"\n1:10\n15.3:20.5\n0:-10##  [1]  1  2  3  4  5  6  7  8  9 10\n## [1] 15.3 16.3 17.3 18.3 19.3 20.3\n##  [1]   0  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10\nseq(from = -1, to = 1, by = 0.2)\nseq(0, 100, length.out = 11)\nseq(0, 10, along.with = LETTERS)##  [1] -1.0 -0.8 -0.6 -0.4 -0.2  0.0  0.2  0.4  0.6  0.8  1.0\n##  [1]   0  10  20  30  40  50  60  70  80  90 100\n##  [1]  0.0  0.4  0.8  1.2  1.6  2.0  2.4  2.8  3.2  3.6  4.0  4.4  4.8  5.2  5.6\n## [16]  6.0  6.4  6.8  7.2  7.6  8.0  8.4  8.8  9.2  9.6 10.0\nrep(0, 10)                      # ten zeroes\nrep(c(1L, 3L), times = 7)       # alternating 1 and 3, 7 times\nrep(c(\"A\", \"B\", \"C\"), each = 2) # A to C, 2 times each##  [1] 0 0 0 0 0 0 0 0 0 0\n##  [1] 1 3 1 3 1 3 1 3 1 3 1 3 1 3\n## [1] \"A\" \"A\" \"B\" \"B\" \"C\" \"C\"\n# Get IDs in the pattern Y Y N N ...\nids <- 1:40\nyynn <- rep(c(TRUE, FALSE), each = 2, \n            length.out = length(ids))\nids[yynn]##  [1]  1  2  5  6  9 10 13 14 17 18 21 22 25 26 29 30 33 34 37 38"},{"path":"data-types.html","id":"lists","chapter":"D Data Types","heading":"D.2.2 Lists","text":"Recall vectors can contain data one type. want store collection data different data types? purpose use list. Define list using list() function.can refer elements list using square brackets like vector, can also use dollar sign notation ($) list items names.Explore 5 ways shown extract value list. data type object? difference single double brackets? one dollar sign?single brackets (bracket1 name1) return list subset items inside brackets. case, just one item, can (try data_types[1:2]). items keep names , returned value rhl(list(double = 10))`.double brackets (bracket2 name2 return single item vector. select one item; data_types[[1:2]] give \"subscript bounds\" error.dollar-sign notation double-brackets. name spaces characters letters, numbers, underscores, full stops, need surround name backticks (e.g., sales$`Customer ID`).","code":"\ndata_types <- list(\n  double = 10.0,\n  integer = 10L,\n  character = \"10\",\n  logical = TRUE\n)\n\nstr(data_types) # str() prints lists in a condensed format## List of 4\n##  $ double   : num 10\n##  $ integer  : int 10\n##  $ character: chr \"10\"\n##  $ logical  : logi TRUE\ndata_types$logical## [1] TRUE\nbracket1 <- data_types[1]\nbracket2 <- data_types[[1]]\nname1    <- data_types[\"double\"]\nname2    <- data_types[[\"double\"]]\ndollar   <- data_types$double"},{"path":"data-types.html","id":"tables-data","chapter":"D Data Types","heading":"D.2.3 Tables","text":"Tabular data structures allow collection data different types (characters, integers, logical, etc.) subject constraint \"column\" table (element list) must number elements. base R version table called data.frame, 'tidyverse' version called tibble. Tibbles far easier work , using . learn differences two data structures, see vignette(\"tibble\").Tabular data becomes especially important talk tidy data Chapter 5, consists set simple principles structuring data.","code":"\n# construct a table by column with tibble\navatar <- tibble(\n  name = c(\"Katara\", \"Toph\", \"Sokka\"),\n  bends = c(\"water\", \"earth\", NA),\n  friendly = TRUE\n)\n\n# or by row with tribble\navatar <- tribble(\n  ~name,    ~bends,  ~friendly,\n  \"Katara\", \"water\", TRUE,\n  \"Toph\",   \"earth\", TRUE,\n  \"Sokka\",  NA,      TRUE\n)\n\n# export the data to a file\nrio::export(avatar, \"data/avatar.csv\")\n\n# or by importing data from a file\navatar <- rio::import(\"data/avatar.csv\")"},{"path":"data-types.html","id":"table-info","chapter":"D Data Types","heading":"D.2.3.1 Table info","text":"can get information table using functions ncol() (number columns), nrow() (number rows), dim() (number rows number columns), name() (column names).","code":"\nnrow(avatar) # how many rows?\nncol(avatar) # how many columns?\ndim(avatar)  # what are the table dimensions?\nnames(avatar) # what are the column names?## [1] 3\n## [1] 3\n## [1] 3 3\n## [1] \"name\"     \"bends\"    \"friendly\""},{"path":"data-types.html","id":"row-col-access","chapter":"D Data Types","heading":"D.2.3.2 Accessing rows and columns","text":"various ways accessing specific columns rows table. ones base R useful know , learning easier (readable) ways Chapters 5 6. Examples base R accessing functions provided reference, since might see people's scripts.","code":"\nkatara     <- avatar[1, ] # first row\ntype       <- avatar[, 2] # second column (bends)\nbenders    <- avatar[c(1, 2), ] # selected rows (by number)\nbends_name <- avatar[, c(\"bends\", \"name\")] # selected columns (by name)\nfriendly   <- avatar$friendly  # by column name"},{"path":"data-types.html","id":"glossary-datatypes","chapter":"D Data Types","heading":"D.3 Glossary","text":"","code":""},{"path":"license.html","id":"license","chapter":"License","heading":"License","text":"book licensed Creative Commons Attribution-ShareAlike 4.0 International License (CC--SA 4.0). free share adapt book. must give appropriate credit, provide link license, indicate changes made. adapt material, must distribute contributions license original.","code":""},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
