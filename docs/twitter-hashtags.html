<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>H Twitter Hashtags | Applied Data Skills</title>

    <meta name="author" content="Emily Nordmann and Lisa DeBruine" />
  
   <meta name="description" content="This book provides an overview of the basic skills needed to turn raw data into informative summaries and visualisations presented in professional reports and presentations. The book will introduce learners to R, a programming language that can help automate working with data. The book will cover importing and processing data from spreadsheets, producing data summaries of descriptive statistics in tables, creating beautiful and informative visualisations, and constructing reports and presentations that automatically update when the underlying data changes." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="H Twitter Hashtags | Applied Data Skills" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://psyteachr.github.io/ads-v1" />
  <meta property="og:image" content="https://psyteachr.github.io/ads-v1/images/logos/logo" />
  <meta property="og:description" content="This book provides an overview of the basic skills needed to turn raw data into informative summaries and visualisations presented in professional reports and presentations. The book will introduce learners to R, a programming language that can help automate working with data. The book will cover importing and processing data from spreadsheets, producing data summaries of descriptive statistics in tables, creating beautiful and informative visualisations, and constructing reports and presentations that automatically update when the underlying data changes." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="H Twitter Hashtags | Applied Data Skills" />
  
  <meta name="twitter:description" content="This book provides an overview of the basic skills needed to turn raw data into informative summaries and visualisations presented in professional reports and presentations. The book will introduce learners to R, a programming language that can help automate working with data. The book will cover importing and processing data from spreadsheets, producing data summaries of descriptive statistics in tables, creating beautiful and informative visualisations, and constructing reports and presentations that automatically update when the underlying data changes." />
  <meta name="twitter:image" content="https://psyteachr.github.io/ads-v1/images/logos/logo" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.0/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.20/datatables.js"></script>
    <link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="include/psyteachr.css" />
    <link rel="stylesheet" href="include/webex.css" />
    <link rel="stylesheet" href="include/style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Processing &amp; Presenting Data">Applied Data Skills</a>:
        <small class="text-muted">Processing &amp; Presenting Data</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="twitter-hashtags" class="section level1" number="18">
<h1><span class="header-section-number">H</span> Twitter Hashtags</h1>
<p>In this appendix, we will create a table of the top five hashtags used in conjunction with #NationalComingOutDay, the total number of tweets in each hashtag, the total number of likes, and the top tweet for each hashtag.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="twitter-hashtags.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)   <span class="co"># data wrangling functions</span></span>
<span id="cb447-2"><a href="twitter-hashtags.html#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rtweet)      <span class="co"># for searching tweets</span></span>
<span id="cb447-3"><a href="twitter-hashtags.html#cb447-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)        <span class="co"># for pasting strings</span></span>
<span id="cb447-4"><a href="twitter-hashtags.html#cb447-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)  <span class="co"># for nice tables</span></span></code></pre></div>
<p>The example below uses the data from Chapter <a href="reports.html#summary">2.6.5</a> (<a href="data/ncod_tweets.rds" download>which you can download</a>), but we encourage you to try a hashtag that interests you.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="twitter-hashtags.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load tweets</span></span>
<span id="cb448-2"><a href="twitter-hashtags.html#cb448-2" aria-hidden="true" tabindex="-1"></a>tweets <span class="ot">&lt;-</span> <span class="fu">search_tweets</span>(<span class="at">q =</span> <span class="st">&quot;#NationalComingOutDay&quot;</span>, </span>
<span id="cb448-3"><a href="twitter-hashtags.html#cb448-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">n =</span> <span class="dv">30000</span>, </span>
<span id="cb448-4"><a href="twitter-hashtags.html#cb448-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">include_rts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb448-5"><a href="twitter-hashtags.html#cb448-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-6"><a href="twitter-hashtags.html#cb448-6" aria-hidden="true" tabindex="-1"></a><span class="co"># save them to a file so you can skip this step in the future</span></span>
<span id="cb448-7"><a href="twitter-hashtags.html#cb448-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(tweets, <span class="at">file =</span> <span class="st">&quot;data/ncod_tweets.rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="twitter-hashtags.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load tweets from the file</span></span>
<span id="cb449-2"><a href="twitter-hashtags.html#cb449-2" aria-hidden="true" tabindex="-1"></a>tweets <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/ncod_tweets.rds&quot;</span>)</span></code></pre></div>
<div id="select-relevant-data" class="section level2" number="18.1">
<h2><span class="header-section-number">H.1</span> Select relevant data</h2>
<p>The function <code>select()</code> is useful for just keeping the variables (columns) you need to work with, which can make working with very large datasets easier. The arguments to <code>select()</code> are simply the names of the variables and the resulting table will present them in the order you specify.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="twitter-hashtags.html#cb450-1" aria-hidden="true" tabindex="-1"></a>tweets_with_hashtags <span class="ot">&lt;-</span> tweets <span class="sc">%&gt;%</span></span>
<span id="cb450-2"><a href="twitter-hashtags.html#cb450-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hashtags, text, favorite_count, media_url)</span></code></pre></div>
</div>
<div id="unnest-columns" class="section level2" number="18.2">
<h2><span class="header-section-number">H.2</span> Unnest columns</h2>
<p>Look at the dataset using <code>View(tweets_with_hashtags)</code> or clicking on it in the Environment tab. You'll notice that the variable <code>hashtags</code> has multiple values in each cell (i.e., when users used more than one hashtag in a single tweet). In order to work with this information, we need to separate each hashtag so that each row of data represents a single hashtag. We can do this using the function <code>unnest()</code> and adding a pipeline of code.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="twitter-hashtags.html#cb451-1" aria-hidden="true" tabindex="-1"></a>tweets_with_hashtags <span class="ot">&lt;-</span> tweets <span class="sc">%&gt;%</span></span>
<span id="cb451-2"><a href="twitter-hashtags.html#cb451-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hashtags, text, favorite_count, media_url)<span class="sc">%&gt;%</span></span>
<span id="cb451-3"><a href="twitter-hashtags.html#cb451-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> hashtags)</span></code></pre></div>
<div class="try">
<p>Look at <code>tweets_with_hashtags</code> to see how it is different from the table <code>tweets</code>. WHy does it have more rows?</p>
</div>
</div>
<div id="top-5-hashtags" class="section level2" number="18.3">
<h2><span class="header-section-number">H.3</span> Top 5 hashtags</h2>
<p>To get the top 5 hashtags we need to know how tweets used each one. This code uses pipes to build up the analysis. When you encounter multi-pipe code, it can be very useful to run each line of the pipeline to see how it builds up and to check the output at each step. This code:</p>
<ul>
<li>Starts with the object <code>tweets_with_hashtags</code> and then;</li>
<li>Counts the number of tweets for each hashtag using <code>count()</code> and then;</li>
<li>Filters out any blank cells using <code>!is.na()</code> (you can read this as "keep any row value where it is not true (<code>!</code>) that <code>hashtags</code> is missing") and then;</li>
<li>Returns the top five values using <code>slice_max()</code> and orders them by the <code>n</code> column.</li>
</ul>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="twitter-hashtags.html#cb452-1" aria-hidden="true" tabindex="-1"></a>top5_hashtags <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb452-2"><a href="twitter-hashtags.html#cb452-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hashtags) <span class="sc">%&gt;%</span></span>
<span id="cb452-3"><a href="twitter-hashtags.html#cb452-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hashtags)) <span class="sc">%&gt;%</span>  <span class="co"># get rid of the blank value</span></span>
<span id="cb452-4"><a href="twitter-hashtags.html#cb452-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> n, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb452-5"><a href="twitter-hashtags.html#cb452-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-6"><a href="twitter-hashtags.html#cb452-6" aria-hidden="true" tabindex="-1"></a>top5_hashtags</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
hashtags
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NationalComingOutDay
</td>
<td style="text-align:right;">
27308
</td>
</tr>
<tr>
<td style="text-align:left;">
nationalcomingoutday
</td>
<td style="text-align:right;">
1343
</td>
</tr>
<tr>
<td style="text-align:left;">
LGBTQ
</td>
<td style="text-align:right;">
829
</td>
</tr>
<tr>
<td style="text-align:left;">
IndigenousPeoplesDay
</td>
<td style="text-align:right;">
811
</td>
</tr>
<tr>
<td style="text-align:left;">
ComingOutDay
</td>
<td style="text-align:right;">
613
</td>
</tr>
</tbody>
</table>
</div>
<p>Two of the hashtags are the same, but with different case. We can fix this by adding in an extra line of code that uses <code>mutate()</code> to overwrite the variable <code>hashtag</code> with the same data but transformed to lower case using <code>tolower()</code>. Since we're going to use the table <code>tweets_with_hashtags</code> a few more times, let's change that table first rather than having to fix this every time we use the table.</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="twitter-hashtags.html#cb453-1" aria-hidden="true" tabindex="-1"></a>tweets_with_hashtags <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb453-2"><a href="twitter-hashtags.html#cb453-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hashtags =</span> <span class="fu">tolower</span>(hashtags))</span>
<span id="cb453-3"><a href="twitter-hashtags.html#cb453-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-4"><a href="twitter-hashtags.html#cb453-4" aria-hidden="true" tabindex="-1"></a>top5_hashtags <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb453-5"><a href="twitter-hashtags.html#cb453-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hashtags) <span class="sc">%&gt;%</span></span>
<span id="cb453-6"><a href="twitter-hashtags.html#cb453-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hashtags)) <span class="sc">%&gt;%</span>  <span class="co"># get rid of the blank value</span></span>
<span id="cb453-7"><a href="twitter-hashtags.html#cb453-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> n, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb453-8"><a href="twitter-hashtags.html#cb453-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-9"><a href="twitter-hashtags.html#cb453-9" aria-hidden="true" tabindex="-1"></a>top5_hashtags</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
hashtags
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
nationalcomingoutday
</td>
<td style="text-align:right;">
28698
</td>
</tr>
<tr>
<td style="text-align:left;">
lgbtq
</td>
<td style="text-align:right;">
1036
</td>
</tr>
<tr>
<td style="text-align:left;">
indigenouspeoplesday
</td>
<td style="text-align:right;">
837
</td>
</tr>
<tr>
<td style="text-align:left;">
comingoutday
</td>
<td style="text-align:right;">
676
</td>
</tr>
<tr>
<td style="text-align:left;">
loveislove
</td>
<td style="text-align:right;">
396
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="top-tweet-per-hashtag" class="section level2" number="18.4">
<h2><span class="header-section-number">H.4</span> Top tweet per hashtag</h2>
<p>Next, get the top tweet for each hashtag using <code>filter()</code>. Use <code>group_by()</code> before you filter to select the most-liked tweet in each hashtag, rather than the one with most likes overall. As you're getting used to writing and running this kind of multi-step code, it can be very useful to take out individual lines and see how it changes the output to strengthen your understanding of what each step is doing.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="twitter-hashtags.html#cb454-1" aria-hidden="true" tabindex="-1"></a>top_tweet_per_hashtag <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb454-2"><a href="twitter-hashtags.html#cb454-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hashtags) <span class="sc">%&gt;%</span></span>
<span id="cb454-3"><a href="twitter-hashtags.html#cb454-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(favorite_count <span class="sc">==</span> <span class="fu">max</span>(favorite_count)) <span class="sc">%&gt;%</span></span>
<span id="cb454-4"><a href="twitter-hashtags.html#cb454-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb454-5"><a href="twitter-hashtags.html#cb454-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<div class="try">
<p>The function <code>slice_max()</code> accomplishes the same thing as the <code>filter()</code> and <code>sample_n()</code> functions above. Look at the help for this function and see if you can figure out how to use it.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="twitter-hashtags.html#cb455-1" aria-hidden="true" tabindex="-1"></a>top_tweet_per_hashtag <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb455-2"><a href="twitter-hashtags.html#cb455-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hashtags) <span class="sc">%&gt;%</span></span>
<span id="cb455-3"><a href="twitter-hashtags.html#cb455-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(</span>
<span id="cb455-4"><a href="twitter-hashtags.html#cb455-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">order_by =</span> favorite_count, </span>
<span id="cb455-5"><a href="twitter-hashtags.html#cb455-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="dv">1</span>, <span class="co"># select the 1 top value</span></span>
<span id="cb455-6"><a href="twitter-hashtags.html#cb455-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">with_ties =</span> <span class="cn">FALSE</span> <span class="co"># don&#39;t include ties</span></span>
<span id="cb455-7"><a href="twitter-hashtags.html#cb455-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb455-8"><a href="twitter-hashtags.html#cb455-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
</div>
</div>
<div id="total-likes-per-hashtag" class="section level2" number="18.5">
<h2><span class="header-section-number">H.5</span> Total likes per hashtag</h2>
<p>Get the total number of likes per hashtag by grouping and summarising with <code>sum()</code>.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="twitter-hashtags.html#cb456-1" aria-hidden="true" tabindex="-1"></a>likes_per_hashtag <span class="ot">&lt;-</span> tweets_with_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb456-2"><a href="twitter-hashtags.html#cb456-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hashtags) <span class="sc">%&gt;%</span></span>
<span id="cb456-3"><a href="twitter-hashtags.html#cb456-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_likes =</span> <span class="fu">sum</span>(favorite_count)) <span class="sc">%&gt;%</span></span>
<span id="cb456-4"><a href="twitter-hashtags.html#cb456-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
<div id="put-it-together" class="section level2" number="18.6">
<h2><span class="header-section-number">H.6</span> Put it together</h2>
<p>We can put everything together using <code>left_join()</code> (see Chapter @ref(left_join)). This will keep everything from the first table specified and then add on the relevant data from the second table specified. In this case, we add on the data in <code>top_tweet_per_hashtag</code> and <code>like_per_hashtag</code> but only for the tweets included in <code>top5_hashtags</code></p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="twitter-hashtags.html#cb457-1" aria-hidden="true" tabindex="-1"></a>top5 <span class="ot">&lt;-</span> top5_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb457-2"><a href="twitter-hashtags.html#cb457-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(top_tweet_per_hashtag, <span class="at">by =</span> <span class="st">&quot;hashtags&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb457-3"><a href="twitter-hashtags.html#cb457-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(likes_per_hashtag, <span class="at">by =</span> <span class="st">&quot;hashtags&quot;</span>) </span></code></pre></div>
</div>
<div id="twitter-data-idiosyncrasies" class="section level2" number="18.7">
<h2><span class="header-section-number">H.7</span> Twitter data idiosyncrasies</h2>
<p>Before we can finish up though, there's a couple of extra steps we need to add in to account for some of the idiosyncrasies of Twitter data.</p>
<p>First, the <code>@</code> symbol is used by R Markdown for referencing (see Chapter  <a href="present.html#references">10.2.4</a>). It's likely that some of the tweets will contain this symbol, so we can use mutate to find any instances of <code>@</code> and add backslashes. Backslashes create a literal version of characters that have a special meaning in R, so adding them means it will print the <code>@</code> symbol without trying to create a reference. Of course <code>\</code> also has a special meaning in R, which means we also need to backslash the backslash. Isn't programming fun? We can use the same code to tidy up any ampersands (&amp;), which sometimes display as "&amp;".</p>
<p>Second, if there are multiple images associated with a single tweet, <code>media_url</code> will be a list, so we use <code>unlist()</code>. This might not be necessary for a different set of tweets; use <code>glimpse()</code> to check the data types.</p>
<p>Finally, we use <code>select()</code> to tidy up the table and just keep the columns we need.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="twitter-hashtags.html#cb458-1" aria-hidden="true" tabindex="-1"></a>top5 <span class="ot">&lt;-</span> top5_hashtags <span class="sc">%&gt;%</span></span>
<span id="cb458-2"><a href="twitter-hashtags.html#cb458-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(top_tweet_per_hashtag, <span class="at">by =</span> <span class="st">&quot;hashtags&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb458-3"><a href="twitter-hashtags.html#cb458-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(likes_per_hashtag, <span class="at">by =</span> <span class="st">&quot;hashtags&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb458-4"><a href="twitter-hashtags.html#cb458-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace @ with \@ so @ doesn&#39;t trigger referencing</span></span>
<span id="cb458-5"><a href="twitter-hashtags.html#cb458-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">gsub</span>(<span class="st">&quot;@&quot;</span>, <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">@&quot;</span>, text),</span>
<span id="cb458-6"><a href="twitter-hashtags.html#cb458-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">text =</span> <span class="fu">gsub</span>(<span class="st">&quot;&amp;amp;&quot;</span>, <span class="st">&quot;&amp;&quot;</span>, text)) <span class="sc">%&gt;%</span></span>
<span id="cb458-7"><a href="twitter-hashtags.html#cb458-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># media_url can be a list if there is more than one image</span></span>
<span id="cb458-8"><a href="twitter-hashtags.html#cb458-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">image =</span> <span class="fu">unlist</span>(media_url)) <span class="sc">%&gt;%</span></span>
<span id="cb458-9"><a href="twitter-hashtags.html#cb458-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># put the columns you want to display in order</span></span>
<span id="cb458-10"><a href="twitter-hashtags.html#cb458-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hashtags, n, total_likes, text, image)</span>
<span id="cb458-11"><a href="twitter-hashtags.html#cb458-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-12"><a href="twitter-hashtags.html#cb458-12" aria-hidden="true" tabindex="-1"></a>top5</span></code></pre></div>
<div class="kable-table">
<table>
<thead>
<tr>
<th style="text-align:left;">
hashtags
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
total_likes
</th>
<th style="text-align:left;">
text
</th>
<th style="text-align:left;">
image
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
nationalcomingoutday
</td>
<td style="text-align:right;">
28698
</td>
<td style="text-align:right;">
851510
</td>
<td style="text-align:left;">
it’s #nationalcomingoutday &lt;U+0001F389&gt; here’s a pic of how I came out back in 2003 xx <a href="https://t.co/spBmHhF6p4" class="uri">https://t.co/spBmHhF6p4</a>
</td>
<td style="text-align:left;">
<a href="http://pbs.twimg.com/media/FBayvGYXsAY-5hZ.jpg" class="uri">http://pbs.twimg.com/media/FBayvGYXsAY-5hZ.jpg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
lgbtq
</td>
<td style="text-align:right;">
1036
</td>
<td style="text-align:right;">
13691
</td>
<td style="text-align:left;">
It takes bravery to life an authentic life. While I was not able to come out as a member of the #LGBTQ community on my own terms, if you’re ready &amp; can safely do so, then I support you! And if you’re not quite there yet, I support you exactly where you are. #NationalComingOutDay <a href="https://t.co/dr61oyhR3L" class="uri">https://t.co/dr61oyhR3L</a>
</td>
<td style="text-align:left;">
<a href="http://pbs.twimg.com/media/FBcJiNUXIA4LTmr.jpg" class="uri">http://pbs.twimg.com/media/FBcJiNUXIA4LTmr.jpg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
indigenouspeoplesday
</td>
<td style="text-align:right;">
837
</td>
<td style="text-align:right;">
14073
</td>
<td style="text-align:left;">
To all my Two Spirit brothers and sisters — I see you — I celebrate you. #NationalComingOutDay #IndigenousPeoplesDay <a href="https://t.co/KsZ5F3gBKO" class="uri">https://t.co/KsZ5F3gBKO</a>
</td>
<td style="text-align:left;">
<a href="http://pbs.twimg.com/media/FBdQIf7UYAQjEAW.jpg" class="uri">http://pbs.twimg.com/media/FBdQIf7UYAQjEAW.jpg</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
comingoutday
</td>
<td style="text-align:right;">
676
</td>
<td style="text-align:right;">
6977
</td>
<td style="text-align:left;">
<p>K—I’m out. Bi &lt;U+0001F44B&gt;&lt;U+0001F3FC&gt;</p>
#ComingOutDay #NationalComingOutDay
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
loveislove
</td>
<td style="text-align:right;">
396
</td>
<td style="text-align:right;">
4033
</td>
<td style="text-align:left;">
<p>HAPPY NATIONAL COMING OUT DAY!!</p>
<p>&lt;U+0001F3F3&gt;&lt;U+FE0F&gt;&lt;U+200D&gt;&lt;U+0001F308&gt;&lt;U+2764&gt;&lt;U+FE0F&gt;&lt;U+0001F9E1&gt;&lt;U+0001F49B&gt;&lt;U+0001F49A&gt;&lt;U+0001F499&gt;&lt;U+0001F49C&gt;&lt;U+0001F3F3&gt;&lt;U+FE0F&gt;&lt;U+200D&gt;&lt;U+0001F308&gt;</p>
@msmadig #OutAndProud #Queer #loveislove #NationalComingOutDay <a href="https://t.co/DVfKJsCqNQ" class="uri">https://t.co/DVfKJsCqNQ</a>
</td>
<td style="text-align:left;">
<a href="http://pbs.twimg.com/ext_tw_video_thumb/1447698152463626242/pu/img/pZor72nSNDPn8KiP.jpg" class="uri">http://pbs.twimg.com/ext_tw_video_thumb/1447698152463626242/pu/img/pZor72nSNDPn8KiP.jpg</a>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="make-it-prettier" class="section level2" number="18.8">
<h2><span class="header-section-number">H.8</span> Make it prettier</h2>
<p>Whilst this table now has all the information we want, it isn't great aesthetically. The <code class='package'>kableExtra</code> package has functions that will improve the presentation of tables. We're going to show you two examples of how you could format this table.</p>
<p>The first is (relatively) simple and stays within the R programming language using functionality from <code class='package'>kableExtra</code>. The main aesthetic feature of the table is the incorporation of the pride flag colours for each row. Each row is set to a different colour of the pride flag and the text is set to be black and bold to improve the contrast. We've also removed the <code>image</code> column, as it just contains a URL.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="twitter-hashtags.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the hex codes of the pride flag colours, obtained from https://www.schemecolor.com/lgbt-flag-colors.php</span></span>
<span id="cb459-2"><a href="twitter-hashtags.html#cb459-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-3"><a href="twitter-hashtags.html#cb459-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the last two characters (80) make the colours semi-transparent.</span></span>
<span id="cb459-4"><a href="twitter-hashtags.html#cb459-4" aria-hidden="true" tabindex="-1"></a><span class="co"># omitting them or setting to FF make them 100% opaque</span></span>
<span id="cb459-5"><a href="twitter-hashtags.html#cb459-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-6"><a href="twitter-hashtags.html#cb459-6" aria-hidden="true" tabindex="-1"></a>pride_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#FF001880&quot;</span>, </span>
<span id="cb459-7"><a href="twitter-hashtags.html#cb459-7" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;#FFA52C80&quot;</span>, </span>
<span id="cb459-8"><a href="twitter-hashtags.html#cb459-8" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;#FFFF4180&quot;</span>, </span>
<span id="cb459-9"><a href="twitter-hashtags.html#cb459-9" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;#00801880&quot;</span>, </span>
<span id="cb459-10"><a href="twitter-hashtags.html#cb459-10" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;#0000F980&quot;</span>, </span>
<span id="cb459-11"><a href="twitter-hashtags.html#cb459-11" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;#86007D80&quot;</span>)</span>
<span id="cb459-12"><a href="twitter-hashtags.html#cb459-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-13"><a href="twitter-hashtags.html#cb459-13" aria-hidden="true" tabindex="-1"></a>top5 <span class="sc">%&gt;%</span></span>
<span id="cb459-14"><a href="twitter-hashtags.html#cb459-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>image) <span class="sc">%&gt;%</span></span>
<span id="cb459-15"><a href="twitter-hashtags.html#cb459-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Hashtags&quot;</span>, <span class="st">&quot;No. tweets&quot;</span>, <span class="st">&quot;Likes&quot;</span>, <span class="st">&quot;Tweet&quot;</span>),</span>
<span id="cb459-16"><a href="twitter-hashtags.html#cb459-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&quot;Stats and the top tweet for the top five hashtags.&quot;</span>,</span>
<span id="cb459-17"><a href="twitter-hashtags.html#cb459-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb459-18"><a href="twitter-hashtags.html#cb459-18" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb459-19"><a href="twitter-hashtags.html#cb459-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb459-20"><a href="twitter-hashtags.html#cb459-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">bold =</span> T, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb459-21"><a href="twitter-hashtags.html#cb459-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">0</span>, <span class="at">font_size =</span> <span class="dv">18</span>,</span>
<span id="cb459-22"><a href="twitter-hashtags.html#cb459-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">background =</span> pride_colours[<span class="dv">1</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb459-23"><a href="twitter-hashtags.html#cb459-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">1</span>, <span class="at">background =</span> pride_colours[<span class="dv">2</span>])<span class="sc">%&gt;%</span></span>
<span id="cb459-24"><a href="twitter-hashtags.html#cb459-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">2</span>, <span class="at">background =</span> pride_colours[<span class="dv">3</span>])<span class="sc">%&gt;%</span></span>
<span id="cb459-25"><a href="twitter-hashtags.html#cb459-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">3</span>, <span class="at">background =</span> pride_colours[<span class="dv">4</span>])<span class="sc">%&gt;%</span></span>
<span id="cb459-26"><a href="twitter-hashtags.html#cb459-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">4</span>, <span class="at">background =</span> pride_colours[<span class="dv">5</span>])<span class="sc">%&gt;%</span></span>
<span id="cb459-27"><a href="twitter-hashtags.html#cb459-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="at">row =</span> <span class="dv">5</span>, <span class="at">background =</span> pride_colours[<span class="dv">6</span>])</span></code></pre></div>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-12">Table H.1: </span>Stats and the top tweet for the top five hashtags.
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 0, 24, 0.5) !important;font-size: 18px;">
Hashtags
</th>
<th style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 0, 24, 0.5) !important;font-size: 18px;">
No. tweets
</th>
<th style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 0, 24, 0.5) !important;font-size: 18px;">
Likes
</th>
<th style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 0, 24, 0.5) !important;font-size: 18px;">
Tweet
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 165, 44, 0.5) !important;">
nationalcomingoutday
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 165, 44, 0.5) !important;">
28698
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 165, 44, 0.5) !important;">
851510
</td>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 165, 44, 0.5) !important;">
it’s #nationalcomingoutday &lt;U+0001F389&gt; here’s a pic of how I came out back in 2003 xx <a href="https://t.co/spBmHhF6p4" class="uri">https://t.co/spBmHhF6p4</a>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 255, 65, 0.5) !important;">
lgbtq
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 255, 65, 0.5) !important;">
1036
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(255, 255, 65, 0.5) !important;">
13691
</td>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(255, 255, 65, 0.5) !important;">
It takes bravery to life an authentic life. While I was not able to come out as a member of the #LGBTQ community on my own terms, if you’re ready &amp; can safely do so, then I support you! And if you’re not quite there yet, I support you exactly where you are. #NationalComingOutDay <a href="https://t.co/dr61oyhR3L" class="uri">https://t.co/dr61oyhR3L</a>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(0, 128, 24, 0.5) !important;">
indigenouspeoplesday
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(0, 128, 24, 0.5) !important;">
837
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(0, 128, 24, 0.5) !important;">
14073
</td>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(0, 128, 24, 0.5) !important;">
To all my Two Spirit brothers and sisters — I see you — I celebrate you. #NationalComingOutDay #IndigenousPeoplesDay <a href="https://t.co/KsZ5F3gBKO" class="uri">https://t.co/KsZ5F3gBKO</a>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(0, 0, 249, 0.5) !important;">
comingoutday
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(0, 0, 249, 0.5) !important;">
676
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(0, 0, 249, 0.5) !important;">
6977
</td>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(0, 0, 249, 0.5) !important;">
<p>K—I’m out. Bi &lt;U+0001F44B&gt;&lt;U+0001F3FC&gt;</p>
#ComingOutDay #NationalComingOutDay
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(134, 0, 125, 0.5) !important;">
loveislove
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(134, 0, 125, 0.5) !important;">
396
</td>
<td style="text-align:right;font-weight: bold;color: black !important;background-color: rgba(134, 0, 125, 0.5) !important;">
4033
</td>
<td style="text-align:left;font-weight: bold;color: black !important;background-color: rgba(134, 0, 125, 0.5) !important;">
<p>HAPPY NATIONAL COMING OUT DAY!!</p>
<p>&lt;U+0001F3F3&gt;&lt;U+FE0F&gt;&lt;U+200D&gt;&lt;U+0001F308&gt;&lt;U+2764&gt;&lt;U+FE0F&gt;&lt;U+0001F9E1&gt;&lt;U+0001F49B&gt;&lt;U+0001F49A&gt;&lt;U+0001F499&gt;&lt;U+0001F49C&gt;&lt;U+0001F3F3&gt;&lt;U+FE0F&gt;&lt;U+200D&gt;&lt;U+0001F308&gt;</p>
@msmadig #OutAndProud #Queer #loveislove #NationalComingOutDay <a href="https://t.co/DVfKJsCqNQ" class="uri">https://t.co/DVfKJsCqNQ</a>
</td>
</tr>
</tbody>
</table>
</div>
<div id="customise-with-html" class="section level2" number="18.9">
<h2><span class="header-section-number">H.9</span> Customise with HTML</h2>
<p>An alternative approach incorporates <a class='glossary' target='_blank' title='Hyper-Text Markup Language: A system for semantically tagging structure and information on web pages.' href='https://psyteachr.github.io/glossary/h#html'>HTML</a> and also uses the package <code class='package'>glue</code> to combine information from multiple columns.</p>
<p>First, we use <code>mutate()</code> to create a new column <code>col1</code> that combines the first three columns into a single column and adds some formatting to make the hashtag bold (<code>&lt;strong&gt;</code>) and insert line breaks (<code>&lt;br&gt;</code>). We'll also change the image column to display the image using html if there is an image.</p>
<p>If you're not familiar with HTML, don't worry if you don't understand the below code; the point is to show you the full extent of the flexibility available.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="twitter-hashtags.html#cb460-1" aria-hidden="true" tabindex="-1"></a>top5 <span class="sc">%&gt;%</span></span>
<span id="cb460-2"><a href="twitter-hashtags.html#cb460-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">col1 =</span> <span class="fu">glue</span>(<span class="st">&quot;&lt;strong&gt;#{hashtags}&lt;/strong&gt;</span></span>
<span id="cb460-3"><a href="twitter-hashtags.html#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="st">                     &lt;br&gt;</span></span>
<span id="cb460-4"><a href="twitter-hashtags.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="st">                     tweets: {n}</span></span>
<span id="cb460-5"><a href="twitter-hashtags.html#cb460-5" aria-hidden="true" tabindex="-1"></a><span class="st">                     &lt;br&gt;</span></span>
<span id="cb460-6"><a href="twitter-hashtags.html#cb460-6" aria-hidden="true" tabindex="-1"></a><span class="st">                     likes: {total_likes}&quot;</span>),</span>
<span id="cb460-7"><a href="twitter-hashtags.html#cb460-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">img =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(image),</span>
<span id="cb460-8"><a href="twitter-hashtags.html#cb460-8" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">glue</span>(<span class="st">&quot;&lt;img src=&#39;{image}&#39; width=&#39;200px&#39; /&gt;&quot;</span>),</span>
<span id="cb460-9"><a href="twitter-hashtags.html#cb460-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb460-10"><a href="twitter-hashtags.html#cb460-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(col1, text, img) <span class="sc">%&gt;%</span></span>
<span id="cb460-11"><a href="twitter-hashtags.html#cb460-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb460-12"><a href="twitter-hashtags.html#cb460-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="co"># allows HTML in the table</span></span>
<span id="cb460-13"><a href="twitter-hashtags.html#cb460-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Hashtag&quot;</span>, <span class="st">&quot;Top Tweet&quot;</span>, <span class="st">&quot;&quot;</span>),</span>
<span id="cb460-14"><a href="twitter-hashtags.html#cb460-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Stats and the top tweet for the top five hashtags.&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-15"><a href="twitter-hashtags.html#cb460-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">extra_css =</span> <span class="st">&quot;vertical-align: top;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-16"><a href="twitter-hashtags.html#cb460-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">extra_css =</span> <span class="st">&quot;vertical-align: bottom;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb460-17"><a href="twitter-hashtags.html#cb460-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>()</span></code></pre></div>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-13">Table 2.1: </span>Stats and the top tweet for the top five hashtags.
</caption>
<thead>
<tr>
<th style="text-align:left;vertical-align: bottom;">
Hashtag
</th>
<th style="text-align:left;vertical-align: bottom;">
Top Tweet
</th>
<th style="text-align:left;vertical-align: bottom;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;vertical-align: top;">
<strong>#nationalcomingoutday</strong>
<br>
tweets: 28698
<br>
likes: 851510
</td>
<td style="text-align:left;vertical-align: top;">
it’s #nationalcomingoutday <u> here’s a pic of how I came out back in 2003 xx <a href="https://t.co/spBmHhF6p4" class="uri">https://t.co/spBmHhF6p4</a> </u>
</td>
<td style="text-align:left;">
<img src="http://pbs.twimg.com/media/FBayvGYXsAY-5hZ.jpg" width="200px">
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top;">
<strong>#lgbtq</strong>
<br>
tweets: 1036
<br>
likes: 13691
</td>
<td style="text-align:left;vertical-align: top;">
It takes bravery to life an authentic life. While I was not able to come out as a member of the #LGBTQ community on my own terms, if you’re ready &amp; can safely do so, then I support you! And if you’re not quite there yet, I support you exactly where you are. #NationalComingOutDay <a href="https://t.co/dr61oyhR3L" class="uri">https://t.co/dr61oyhR3L</a>
</td>
<td style="text-align:left;">
<img src="http://pbs.twimg.com/media/FBcJiNUXIA4LTmr.jpg" width="200px">
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top;">
<strong>#indigenouspeoplesday</strong>
<br>
tweets: 837
<br>
likes: 14073
</td>
<td style="text-align:left;vertical-align: top;">
To all my Two Spirit brothers and sisters — I see you — I celebrate you. #NationalComingOutDay #IndigenousPeoplesDay <a href="https://t.co/KsZ5F3gBKO" class="uri">https://t.co/KsZ5F3gBKO</a>
</td>
<td style="text-align:left;">
<img src="http://pbs.twimg.com/media/FBdQIf7UYAQjEAW.jpg" width="200px">
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top;">
<strong>#comingoutday</strong>
<br>
tweets: 676
<br>
likes: 6977
</td>
<td style="text-align:left;vertical-align: top;">
<p>K—I’m out. Bi <u><u></p>
#ComingOutDay #NationalComingOutDay </u></u>
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;vertical-align: top;">
<strong>#loveislove</strong>
<br>
tweets: 396
<br>
likes: 4033
</td>
<td style="text-align:left;vertical-align: top;">
<p>HAPPY NATIONAL COMING OUT DAY!!</p>
<p><u><u><u><u><u><u><u><u><u><u><u><u><u><u><u></p>
@msmadig #OutAndProud #Queer #loveislove #NationalComingOutDay <a href="https://t.co/DVfKJsCqNQ" class="uri">https://t.co/DVfKJsCqNQ</a> </u></u></u></u></u></u></u></u></u></u></u></u></u></u></u>
</td>
<td style="text-align:left;">
<img src="http://pbs.twimg.com/ext_tw_video_thumb/1447698152463626242/pu/img/pZor72nSNDPn8KiP.jpg" width="200px">
</td>
</tr>
</tbody>
</table>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script>
<script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Applied Data Skills</strong>: Processing &amp; Presenting Data" was written by Emily Nordmann and Lisa DeBruine. It was last built on 2022-02-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
